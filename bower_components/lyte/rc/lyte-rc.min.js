function ReplaceWith(e){var t=this.parentNode,r=arguments.length,o=+(t&&"object"==typeof e);if(t){for(;r-- >o;)t&&"object"!=typeof arguments[r]&&(arguments[r]=document.createTextNode(arguments[r])),t||!arguments[r].parentNode?t.insertBefore(this.previousSibling,arguments[r]):arguments[r].parentNode.removeChild(arguments[r]);o&&t.replaceChild(this,e)}}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var r=e instanceof Node;t.appendChild(r?e:document.createTextNode(String(e)))}),this.parentNode.insertBefore(t,this.nextSibling)}})}),Element.prototype.replaceWith||(Element.prototype.replaceWith=ReplaceWith),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=ReplaceWith),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=ReplaceWith),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return t<this.length?t|=0:t=this.length,this.substr(t-e.length,e.length)===e}),Lyte={},Lyte.version=1,Lyte.registeredMixins={},Lyte.Mixin={},Lyte.debug=!1,Lyte.performance=!1,Lyte.toBeRegistered=[];var consoleTime=[];function domContentLoaded1(){let e=Lyte.toBeRegistered;if(e.length){for(let t=0;t<e.length;t++)customElements.define(e[t].name,e[t].def);Lyte.toBeRegistered=[]}}Lyte.Mixin.register=function(e,t){Lyte.registeredMixins[e]=t},Lyte.log=function(e,t){Lyte.debug&&console.log((t?"%c":"")+e,"color:"+t)},Lyte.time=function(e){var t;Lyte.performance&&(-1!=(t=consoleTime.indexOf(e))?(consoleTime.splice(t,1),console.timeEnd(e)):(consoleTime.push(e),console.time(e)))},Lyte.isRecord=function(e){return!!(e&&e.$&&e.$.hasOwnProperty("isModified"))},Lyte.isComponent=function(e){return!!(e&&e.$node&&e.__data)},Lyte.injectResources=function(e,t,r){if(e){var o=-(e=Array.isArray(e)?e:[e]).length;e.forEach(function(e){var n,i=e.split("."),a=i[i.length-1];n=document.createElement({js:"script",css:"link"}[a]),1!=i.length?("css"==a?(n.setAttribute("href",e),n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet")):n.setAttribute("src",e),n.onerror=n.onload=function(e){o++,t&&t.call(this,e),r&&0==o&&r()},document.head.appendChild(n)):console.error("Type of file is not specified in injectResources.")})}},Lyte.checkProperty=function(e,t,r,o,n){switch(e){case"type":if(Lyte.Transform.hasOwnProperty(o)){if(Array.isArray(t)){if("array"!=Lyte.Transform[o].extends)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o}}else if(Lyte.Transform[o].extends!=typeof t)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o}}else if(Array.isArray(t)){if("array"!=o)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o}}else if(o!=typeof t)return{code:"ERR03",message:Lyte.errorCodes.ERR03,expected:o};break;case"maximum":if("number"==typeof t&&t>o)return{code:"ERR04",message:Lyte.errorCodes.ERR04,expected:o};break;case"minimum":if("number"==typeof t&&t<o)return{code:"ERR05",message:Lyte.errorCodes.ERR05,expected:o};break;case"maxLength":case"maxItems":if(t.length>o)return{code:"ERR06",message:Lyte.errorCodes.ERR06,expected:o};break;case"minLength":case"minItems":if(t.length<o)return{code:"ERR07",message:Lyte.errorCodes.ERR07,expected:o};break;case"pattern":if("string"==typeof t&&!new RegExp(o).test(t))return{code:"ERR08",message:Lyte.errorCodes.ERR08,expected:o};break;case"uniqueItems":if(Array.isArray(t)&&o)for(var i=[],a=0;a<t.length;a++){var s=t[a];if(-1!=i.indexOf(s))return{code:"ERR09",message:Lyte.errorCodes.ERR09};i.push(s)}break;case"constant":if(Array.isArray(t)){if(!(c=t.length==o.length&&t.every(function(e,t){return e===o[t]})))return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:o}}else if("object"==typeof t){if(!(c=store.adapter.$.compareObjects(t,o)))return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:o}}else if(t!=o)return{code:"ERR10",message:Lyte.errorCodes.ERR10,expected:o};break;case"items":if(Array.isArray(t))for(a=0;a<t.length;a++)for(var e in o){if(1!=(c=Lyte.checkProperty(e,t[a],a,o[e])))return c}break;case"properties":if("object"==typeof t&&!Array.isArray(t))for(var r in t)for(var e in o){if(1!=(c=Lyte.checkProperty(e,t[r],r,o[e])))return c}break;case"validation":var c;if(1!=(c=Lyte.customValidator[o].apply(n,[r,t])))return c}return!0},Lyte.types=["string","object","number","boolean","array"],Lyte.attr=function(e,t){if(void 0==t&&(t={}),-1==this.types.indexOf(e)&&!Lyte.Transform.hasOwnProperty(e))throw new Error("Not a valid field type - "+e);return t.type=e,t},Lyte.defineRelation=function(e,t,r){var o={type:"relation",relType:t,relatedTo:e};return r&&(o.opts=r),o},Lyte.belongsTo=function(e,t){return this.defineRelation(e,"belongsTo",t)},Lyte.hasMany=function(e,t){return this.defineRelation(e,"hasMany",t)},Lyte.Transform={},Lyte.customValidator={},Lyte.registerDataType=function(e,t){if(this.Transform.hasOwnProperty(e))throw new Error("Custom Field Type - "+e+" -  already exists.");if(void 0==t.extends||-1==Lyte.types.indexOf(t.extends))throw new Error("Not a valid field type - "+t.extends);this.Transform[e]=t},Lyte.registerValidator=function(e,t){if(this.customValidator.hasOwnProperty(e))throw new Error("Custom Validator with name - "+e+" - already exists");this.customValidator[e]=t},Lyte.patterns={email:/([A-Za-z0-9._%\-'+/]+@[A-Za-z0-9.-]+\.[a-zA-Z]{2,22})$|[\s]+/,url:/(^(ht|f)tp(s?):\/\/[0-9a-zA-Z][-.\w]*(:[0-9])*(\/?)([a-zA-Z0-9\-.?,:'/\\+=&amp;%$#_[\]@!()*;~]*)?$)/,ampm:/^(AM|PM|am|pm)$/,hour:/^(0?[0-9]|1[0-9]|2[0-4])$/,minute:/^(0?[0-9]|[1-5][0-9]|60)$/,boolean:/^(true|false|TRUE|FALSE)$/,alphaNumeric:/([a-zA-Z0-9])+/,alphabetsOnly:/([a-zA-Z])+/,numeric:/([0-9])+/,phoneNo:/^[0-9a-zA-Z+.()\-;\s]+$/},Lyte.validate=function(e,t,r,o){var n=o.__data[t],i=!1;for(var a in n)if(!0!==(i=Lyte.checkProperty(a,r,t,n[a],e)))return i;return!1},Lyte.registerPattern=function(e,t){this.patterns[e]=t},Lyte.errorCodes={ERR01:"Primary key cannot be modified",ERR02:"Mandatory field cannot be empty",ERR03:"Type of value does not match the specified data type",ERR04:"Value is greater than the maximum value allowed",ERR05:"Value is less than the minimum value allowed",ERR06:"Length of string/array is greater than the maximum limit allowed",ERR07:"Length of string/array is less than the minimum limit allowed",ERR08:"String does not match the specified pattern",ERR09:"Values in array are not unique",ERR10:"Value is not equal to the specified constant",ERR11:"Model of related field is not defined",ERR12:"Model of backward relation is not defined",ERR13:"Record not found",ERR14:"Model does not match the related field model",ERR15:"Error in creating a record as a relation",ERR16:"Record with primary key already exists",ERR17:"Value cannot be changed because record has been deleted",ERR18:"Action not defined",ERR19:"Model not defined",ERR20:"Key not specified",ERR21:"'belongsTo' relationship expects a single object/id",ERR22:"Type not specified for polymorphic relation",ERR23:"Primary Key value not present",ERR24:"Error while relating record"},Lyte.registeredGlobalEvents={},Lyte.triggerEvent=function(){var e=Array.prototype.slice.call(arguments,1),t=arguments[0],r=this.registeredGlobalEvents[t];if(r)for(var o=0;o<r.listeners.length;o++){var n=r.listeners[o];n&&n.apply(this,e)}else r=this.registeredGlobalEvents[t]={listeners:[]};var i=new CustomEvent(t,{detail:e});document.dispatchEvent(i)},Lyte.addEventListener=function(e,t){if("function"==typeof t){var r=this.registeredGlobalEvents[e];return r||(r=this.registeredGlobalEvents[e]={listeners:[]}),e+"-"+(r.listeners.push(t)-1)}console.error("Second parameter to LyteComponent.addGlobalEventListener() must be a function")},Lyte.removeEventListener=function(e){if(e){var t=e.split("-"),r=this.registeredGlobalEvents[t[0]];r&&r.listeners[t[1]]?r.listeners[t[1]]=null:console.error("No such listener registered")}else console.error("listener unique id not specified")},Lyte.deepCopyObject=function(e){for(var t,r,o,n,i,a,s=[{source:e,target:Object.create(Object.getPrototypeOf(e))}],c=[e],d=s[0].target,l=[d];t=s.shift();)for(r=Object.getOwnPropertyNames(t.source),o=0;o<r.length;o++)(n=Object.getOwnPropertyDescriptor(t.source,r[o])).value&&"object"==typeof n.value?(i=n.value,n.value=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),-1==(a=c.indexOf(i))?(c.push(i),l.push(n.value),Object.defineProperty(t.target,r[o],n),s.push({source:i,target:n.value})):(n.value=l[a],Object.defineProperty(t.target,r[o],n))):Object.defineProperty(t.target,r[o],n);return d},Lyte.resolvePromises=function(e){if(Array.isArray(e))return function(e){var t=[];return new Promise(function(r,o){Promise.all(e).then(function(o){e.forEach(function(e,r){t[r]=o[r]}),r(t)},function(e){o(e),console.error(e)})})}(e);if("object"==typeof e)return function(e){var t=[],r=[];if(Object.keys(e).forEach(function(o){t.push(o),r.push(e[o])}),r.length){var o={},n=new Promise(function(e,n){Promise.all(r).then(function(r){r.forEach(function(e,r){o[t[r]]=e}),e(o)},function(e){n(e),console.error(e)})});return n}return e}(e)},Lyte.createCustomElement=function(e,t){var r=t.constructor;delete t.constructor,this.defProperty=function(e,t,r){var o={};r.get&&(o.get=r.get),r.set&&(o.set=r.set),Object.defineProperty(e,t,o)};class o extends HTMLElement{constructor(){super(),r&&r.apply(this,Array.from(arguments))}}var n=t.static;if(n){for(var i in n)"object"==typeof n[i]?this.defProperty(o,i,n[i]):Object.defineProperty(o,i,{value:n[i]});delete t.static}for(var i in t)"object"==typeof t[i]?this.defProperty(o.prototype,i,t[i]):Object.defineProperty(o.prototype,i,{value:t[i]});t.static=n[i],t.constructor=r,"complete"===document.readyState||"interactive"===document.readyState?customElements.define(e,o):Lyte.toBeRegistered.push({name:e,def:o})},"complete"===document.readyState||"interactive"===document.readyState?domContentLoaded1():document.addEventListener("DOMContentLoaded",function(e){domContentLoaded1()},!0);Lyte.Router={definitions:{}},function e(t){function r(e){return this.routes=e,this.history="html5"==B.history,this.baseURL=B.baseURL,this.deferInit=B.deferInit||!1,this}function n(){class e extends HTMLElement{static get observedAttributes(){return["lt-prop-route","lt-prop-dp","lt-prop-qp","lt-prop","lt-prop-class","lt-prop-id","lt-prop-rel","lt-prop-title","lt-prop-style","lt-prop-target"]}attributeChangedCallback(e,t,r){if(this.hasAttribute("lyte-rendered")&&this._linkCreated){let t=this.children[0];"lt-prop"===e?(this.handleLtProp(),this.hasAttribute("lt-prop-custom")||this.setCustomAttributes(t,!0),this.getMatchedObject(),"A"===t.tagName&&this.constructHref(t)):/^(lt-prop-route|lt-prop-dp|lt-prop-qp)$/.test(e)?(this.getMatchedObject(),"A"===t.tagName&&this.constructHref(t)):this.hasAttribute("lt-prop-custom")||t.setAttribute(e.substring(8),r)}}connectedCallback(){if(this.ltProp=this.ltProp||{},this.hasAttribute("lyte-rendered"))return this._linkCreated=!0,void this.getMatchedObject();this.handleLtProp();let e;if(this.hasAttribute("lt-prop-custom")||this.ltProp.custom)this.getMatchedObject(),"A"===this.children[0].tagName&&this.constructHref(this.children[0]);else{e=document.createElement("a");let t=this.childNodes.length;for(let r=0;r<t;r++)e.appendChild(this.childNodes[0]);this.setCustomAttributes(e),this.getMatchedObject(),this.constructHref(e),this.appendChild(e)}this.setAttribute("lyte-rendered",""),this._linkCreated=!0}handleLtProp(){var e=this.getAttribute("lt-prop");if(e)try{var t=JSON.parse(e);this.ltProp=t}catch(e){console.warn("Error while parsing ltProp in link-to")}}setCustomAttributes(e,t){for(let t in this.ltProp)/^(id|class|style|target)$/.test(t)&&e.setAttribute(t,this.ltProp[t]);if(!t){var r=this.attributes;for(let t=0;t<r.length;t++){let n=r[t].nodeName;"lt-prop"!==n&&/^(lt-prop-id|lt-prop-class|lt-prop-style|lt-prop-target)$/.test(n)&&e.setAttribute(n.substring(8),r[t].nodeValue)}}}constructHref(e){let t=u(E(this.matched));t=H.history?s(t,!0):"#"+t,e.setAttribute("href",t)}getMatchedObject(){let e=this.matched||{};e.route=this.getAttribute("lt-prop-route")||this.ltProp.route;let t=this.getAttribute("lt-prop-dp")||this.ltProp.dp||[],r=this.getAttribute("lt-prop-qp")||this.ltProp.qp||{};if(t instanceof Array)e.dynamicParams=[];else try{e.dynamicParams=JSON.parse(t)||[]}catch(t){console.error("Error while parsing dynamicParams in link-to."),e.dynamicParams=[]}if(r instanceof Object)e.queryParams={};else try{e.queryParams=JSON.parse(r)}catch(t){console.error("Error while parsing queryParams in link-to."),e.queryParams={}}this.matched=e}}customElements.define("link-to",e)}function o(e){Lyte.time("parseRouteMapping");var t={},n={},o=[],i=[];return this.route=function(e,a,s){if("object"==typeof a)if(a.path||(a.path=g(e)),p(a.path,"?")){var u=a.path.split("?");a.defQP=r.frameQueryParams(u[1]),a.path=u[0]}else a.queryParams&&(a.defQP=a.queryParams,delete a.queryParams);else"function"==typeof a&&(s=a),a={path:g(e)};if("/"==a.path)n=f(o,Q)[a.path]={$:{}},o.push("/");else{var c=a.path;n=f(o,Q)[a.path]={$:{}},x(c)||q(c)?P(c).every(function(e,t,r){if(x(e))return a.dynamicKey=n.$.dynamicKey=e.replace(":",""),a.dynamicIndex=n.$.dynamicIndex=t,!1;if(q(e)){a.dynamicKey=n.$.dynamicKey=e.replace("*",""),a.dynamicIndex=n.$.dynamicIndex=t,a.wildcard=n.$.wildcard=!0,a.sufix=n.$.sufix=[];for(var o=t+1;o<r.length;o++)n.$.sufix.push(r[o]);return!1}return!0}):a.dynamicKey=n.$.dynamicKey=void 0,o.push(c)}i.push(e),n.$.route=Array.from(i);var d=t;i.forEach(function(e,t){t+1!=i.length&&(d=d[e])}),d[e]={$:a},s&&s.call(this,{}),i.pop(),o.pop()},e.call(this,{}),Lyte.time("parseRouteMapping"),t}function i(e){if(e){var t,r;if("object"==typeof e?$?(r=$.title,$.runLoop&&$.runLoop.current&&$.runLoop.current[0]&&"redirect"==$.runLoop.current[0]?t=_(e):(N=void 0,t=u(e))):t=u(e):console.warn("Not a valid route transition"),k={type:e.replace?"replaceState":"pushState",url:t,title:r,fromHistory:!1},Lyte.log("Transitioning to "+t,W),void 0==N){var n;if(!(n=R(e)))return;c(t,n)}return $.routeTrans}console.error("Transition tried without arguments.")}function a(e){return e||z.addToHistory({type:"replaceState",title:document.title,url:e="/"}),e}function s(e,t){var r=H.baseURL;if(r&&e){if(r=g(H.baseURL),0==e.indexOf(r)&&!t)return e.replace(r,"");if(t&&-1==e.indexOf(r))return r+e}return e}function u(e){if(e){e.route&&!Array.isArray(e.route)&&(e.route=e.route.split("."));var t,r="";return e.route.forEach(function(t,n){var o,i=e.route.slice(0,n+1),a=f(i,H.routes);if(!a)return console.error('There is no url mapped for the route "'+i.join(".")+'".'),!1;var s=a.$.path;if(o=a.$.defQP)for(var u in o)e.queryParams&&!e.queryParams.hasOwnProperty(u)&&(e.queryParams[u]=o[u]);if(a.$.dynamicKey){var c=P(s);if(!e.dynamicParams||!e.dynamicParams[n])return console.error("Dynamic params for the route "+t+" is not defined."),!1;c[a.$.dynamicIndex]=encodeURI(e.dynamicParams[n]),r+=g(c.join("/"))}else r+=g(s)}),r="/"==r[r.length-1]&&1!=r.length?r.slice(0,-1):r,t=Object.keys(e.queryParams).filter(function(t){return void 0!=e.queryParams[t]&&t}),e.queryParams&&t.length&&(r+="?",t.forEach(function(n,o){r+=n+"="+encodeURIComponent(e.queryParams[n])+(o<t.length-1?"&":"")})),b(r)}}function c(e,t){Lyte.time("RouteTransition"),$&&($.running||M&&$!=M)&&$.abort(),S.error=!1,t||(t=T(e)),t&&t.matched.route.length&&(Lyte.time("constructRunLoop"),t.runLoop||(t.runLoop=d(t.currentRoutes,t.matched,M)),Lyte.time("constructRunLoop"),h(t)),Lyte.time("RouteTransition")}function d(e,t,r,n){function o(e,t){u.forEach(function(n){var o={};o.hook=n,o.index=t,void 0!=N&&N==t&&r&&r[t]&&r[t].routeName==e.routeName&&p(["redirect","renderTemplate","afterRender"],n)?d.push(o):e.forceFetch&&!p(["redirect","renderTemplate","afterRender"],n)?(h.push(o),"afterModel"==n&&(e._fetchStatus="pending")):d.push(o)})}var i,a,s,u=["beforeModel","model","afterModel","redirect","renderTemplate","afterRender"],c=similar=!0,d=[],h=[],f=[],l=[],m=[],y=[],v=[],g=t.route.length;if(n&&(n=n.split(".")).pop(),e.forEach(function(u,h){if(r){if(a=r.currentRoutes,(s=a[h])&&s.routeName==u.routeName&&r.routeInstances[h]._rendered&&similar&&(!n||n[h]==u.routeName))if(u._queryParams||u._dynamicParams){u._queryParams&&u.queryParams.forEach(function(e){(t.queryParams||r.matched.queryParams)&&t.queryParams[e]!=r.matched.queryParams[e]&&similar&&l()}),u._dynamicParams&&t.dynamicParams[h]!=r.matched.dynamicParams[h]&&similar&&l();function l(){o(u,h),r.routeInstances[h]._rendered=!1,similar=!1}similar&&d.push({hook:"redirect",index:h})}else d.push({hook:"redirect",index:h});else s&&s.routeName!=u.routeName&&(c&&r.routeInstances[h]._rendered&&(i=h,c=!1),v.push(s)),o(u,h),similar=!1;g==h+1&&r.matched.route.length>g&&(c&&r.routeInstances[h+1]._rendered&&(i=void 0==i?h+1:i),v=v.concat(a.slice(h+1)))}else o(u,h);var m=e.length-h-1;f.push({hook:"getResources",index:h}),f.push({hook:"getDependencies",index:h}),y.push({hook:"didTransition",index:m})}),r){var P=a.length;void 0==N&&a.forEach(function(e,t){m.push({hook:"willTransition",index:P-t-1})}),v.forEach(function(e,t){var r=P-t-1;void 0==N?l.push({hook:"beforeExit",index:r}):r<N&&l.push({hook:"beforeExit",index:r})})}return d={previous:m.concat(l),current:f.concat(d).concat(y),forceFetch:h},d.current.removeTemplate=i,d}function h(e){H.transition=$=new l(e),$.routeTrans=L($),$.routeInstances=r.initRoute(e.matched),D?($.routeTrans.data=D.data,S.beforeRouteTransition(M&&M.routeTrans||void 0,$.routeTrans,D),$.running=!0,D.data=$.routeTrans.data,D.type="replaceState",z.addToHistory(D),D=void 0):$.routeTrans.data&&z.addToHistory({type:"replaceState",data:$.routeTrans.data}),setTimeout(function(){k&&$.routeTrans.data&&(k.data=$.routeTrans.data),$.run()},0)}function f(e,t){return e.every(function(e){return t&&t[e]?(t=t[e],!0):t=!1}),t}function l(e){this.runLoop=e.runLoop,this.matched=e.matched,this.target=e.matched.target,this.info={route:e.matched.target,queryParams:e.matched.queryParams,dynamicParams:e.matched.dynamicParams.filter(v)},this.currentRoutes=e.currentRoutes,this.aborted=this.paused=!1,this.abort=function(){this.aborted||(this.runningPromise&&this.runningPromise.reject("aborted"),this.runLoop={},this.aborted=!0,y(this.currentPromise&&"willTransition"==this.currentPromise.hook))}.bind(this),this.pause=function(){return this.paused=$.currentPromise,this.resume=this.routeTrans.resume=function(e){(e=e||this).runningPromise&&e.runningPromise.reject(),delete e.routeTrans.resume,delete e.resume;var t=$.paused.state;e.runLoop[t][0].hook==$.paused.hook&&e.runLoop[t][0].index==$.paused.index&&e.runLoop[t].splice(0,1),e.paused=!1,e.run()}.bind(this),this.routeTrans}.bind(this)}function m(e){function t(e,n){function o(){0==++u&&n()}function a(e,t,n){F[e]?F[e].$.push({type:r,index:i,resolve:n}):(F[e]={$:[{type:r,index:i}]},t&&"error"!=t.event.type?(s.call(t.tag,t.event,!0),n()):Lyte.injectResources([e],s,n))}function s(e,t){var r=this.getAttribute("src")||this.getAttribute("href");t||(J[r]&&J[r].tag.remove(),this.onerror=this.onload=void 0,J[r]={tag:this,event:{type:e.type}}),G.set(r,e,t)}if(e){Array.isArray(e)||(e=[e]),e.length||n();var u=-e.length;e.forEach(function(e){"string"==typeof e?a(e,J[e],function(){o()}):Array.isArray(e)?new Promise(function(r){t(e,r)}).then(function(){o()}):new Promise(function(r){t(e.parent,r)}).then(function(){new Promise(function(r){t(e.child,r)}).then(function(){o()})})})}else n()}var r=e.req,n=e.route,o=$.currentPromise.hook,i=e.index,a=getRequirementsErrorType(r);return new Promise(function(r){t(e.requirements,r)}).then(function(){n[r+"Loaded"]=!0,n[a]&&n[a].length?$.aborted||($.paused||$.pause(),C(o,i,n[a])):$.pending&&void 0!=$.pending[r]&&$.pending[r]==i&&$.run()})}function p(e,t){return-1!=e.indexOf(t)}function y(e){$.running&&(F={},$.running=!1,S.afterRouteTransition($.routeTrans),Lyte.log("Transition completed.",W)),H.prevTransition=H.transition=e?$=M:M=$,j=N=void 0}function v(e){return void 0!=e}function g(e){return"/"==e[0]?e:"/"+e}function P(e){return e.match(/[^/?]+/g)||[]}function b(e){return e=e.replace(/\/\//g,"/"),e=e.replace(/\/\?/g,"?")}function T(e,n){function o(e,n,o,i){var a,s,c={};if(c.route=f(n,Q).$.route,c.queryParams=i?r.frameQueryParams(i):{},c.dynamicParams=r.frameDynamicParams(o,c),e)return c;var d=R(c);return!S.error&&(s=Lyte.deepCopyObject(d.matched),a=u(s),I(s.queryParams,c.queryParams)||(D=z.addToHistory({type:"replaceState",data:t.history.state,title:document.title,url:a,fromHistory:!0})),d)}if(e){var i=[],a=e.split("?"),e=decodeURI(a[0]),s=a[1],c=P(e);if("/"==e){if(!f(["/"],Q))return void console.error("url '"+e+"' is not defined in router");i.push([e])}else{var d,h=0,l=[0],m=[];m.dynamicParams=[],y(Q);function p(e,t,r,n,o){if(!n.$.wildcard&&!n.$.dynamicKey){var i;if((i=f(o,Q).$)&&i.wildcard&&!(r+=t.slice(r).indexOf(e[0])))return!1}for(var a=0;a<e.length;a++,r++)if(e[a]!=t[r]&&!x(e[a]))if(q(e[a]))n.$.sufix.length&&(r=t.indexOf(n.$.sufix[0])-1);else{if("/"!=e[r])return!1;r--}return r}function y(e){for(var t in e)if(!d){var r,n=e[t];if("$"!=t){var o=P(t);if(o&&!1!==(r=p(o,c,h,n,m)))if(l.push(r),h=l[l.length-1],c.length==h){var a=Array.from(m.concat(t));if(n["/"]&&(a=a.concat("/")),i.push(a),!n.$.wildcard)return void(d=a);l.pop(),h=l[l.length-1]}else{var s=Object.keys(n);if(m.push(t),c[h])if(n.$.wildcard&&!n.$.sufix.length&&1==s.length){var u=Array.from(m);n["/"]&&(u=u.concat("/")),i.push(u)}else s.length>1&&y(n);m.pop(),l.pop(),h=l[l.length-1]}}}}}if(d)return o(n,d,e,s);if(1==i.length)return o(n,i[0],e,s);if(i.length){for(var v,g,b=[],T=0;T<i.length;T++)1==i[T].length&&(v=i[T]),b.push(L(i[T]));if(g=Math.max(...b))return o(n,i[b.indexOf(g)],e,s);if(v)return o(n,v,e,s);console.error("url '"+e+"' is not defined in router");function L(e){e=Array.from(e),staticPath=0,"/"==e[0]&&(staticPath++,e.shift());var t=-1;return e.forEach(function(e,r){P(e).forEach(function(e,r){e==c[++t]&&staticPath++})}),staticPath}}else console.error("url '"+e+"' is not defined in router")}else console.error("path is not valid")}function R(e){var t=S.definitions,r=H.routes,n=[];return e.target="",e._routes=[],e.route.every(function(o,i){if(e.target=e.target?e.target+"."+o:o,r=f([o],r),!(t=f([o],t))||!t.$)return console.error('There is no route object for the route "'+e.target+'"'),S.error=!0,!1;o=e.target.split("."),e._routes.push(o);var a=t.$;return a.queryParams&&(a._queryParams={},a.queryParams.forEach(function(t){a._queryParams[t]=e.queryParams[t]?e.queryParams[t]:r.defQP&&r.defQP[t]?r.defQP[t]:void 0})),a._dynamicParams=e.dynamicParams[i],n.push(a)}),!S.error&&{currentRoutes:n,matched:e}}function L(e){return new function(e){var t=["runLoop","paused","currentRoutes","routeInstances","aborted","currentPromise","run","pending"];for(var r in e)-1==t.indexOf(r)&&(this[r]=e[r])}(e)}function x(e){return!!p(e,":")}function q(e){return!!p(e,"*")}function I(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var o in e)if(e[o]!=t[o])return!1;return!0}function A(e){if("object"!=typeof e){var t={};return t.queryParams={},t.dynamicParams=[],Array.from(arguments).forEach(function(e,r){0==r?t.route=e:"object"==typeof e?t.queryParams=e:t.dynamicParams.push(e)}),E(t)}if(e.route)return E(e)}function E(e){if(e.route){var t={};t.route=e.route.split("."),t.queryParams=e.queryParams||{},t.dynamicParams=[],t.target="",t._routes=[];var r=e.dynamicParams?Array.from(e.dynamicParams):[];return t.route.forEach(function(e,n){t.target=t.target?t.target+"."+e:e;var o=t.target.split("."),i=f(t.route.slice(0,n+1),H.routes);t._routes.push(o),i?t.dynamicParams.push(i.$.dynamicKey?r.shift():void 0):console.error('There is no route object for the route "'+t.target+'".')}),t}}function _(e){var t,r=$.runLoop.current[0],n=u(e),o=R(e);return N=r.index,o.runLoop=d(o.currentRoutes,o.matched,$),t=o.runLoop.current.removeTemplate,j=void 0!=t&&M&&t<=N?M:$,$.abort(),c(n,o),n}t._router=e;var k,$,M,w,j,N,O,H,D,C,S=Lyte.Router,K=document.location,U=[],Q={},F={},J={},W="route",B={},V={get:function(e){var t=S.definitions;return e.forEach(function(e){t=t[e]}),t&&t.$||void 0},set:function(e,t){var r=S.definitions,n=e.length-1;e.forEach(function(e,o){n===o?r[e]?r[e].$=t:r[e]={$:t}:r[e]||(r[e]={}),r=r[e]})}},z={history:!1,init:function(e,r){function n(e){O.forEach(function(t){t(e)})}this.history=r,O||(O=[]),"onhashchange"in t&&(void 0===document.documentMode||document.documentMode>7)&&(!0===this.history?t.onpopstate=n:t.onhashchange=n),O.push(e)},addToHistory:function(e){var r;return e.fromHistory=void 0!=e.fromHistory&&e.fromHistory,e.url&&(r=H.history?g(s(e.url,!0)):"#"+g(e.url)),e.title=e.title||document.title,r?t.history[e.type](e.data,e.title,r):t.history[e.type](e.data,e.title),delete e.type,e}};S.configureDefaults=function(e){B=e||{}},S.removeFromCache=function(e){e="*"==e?Object.keys(J):Array.isArray(e)?e:[e],U=U.concat(e)},S.beforeRouteTransition=S.afterRouteTransition=function(){},S.configureRoutes=function(e){H=this.instance=new r("function"==typeof e?o.call(this,e):e),t.addEventListener("DOMContentLoaded",function(){!H.deferInit&&S.init&&(S.init(),S.init=void 0)})},S.init=function(){H.init(),n()},document.addEventListener("click",function(e){if(2!=e.button){for(var t=e.target||e.srcElement;t&&"LINK-TO"!==t.nodeName;)t=t.parentNode;if(t){if("A"===t.children[0].tagName&&(1==e.ctrlKey||1==e.metaKey||2==e.which||t.children[0].hasAttribute("target")&&"_self"!==t.children[0].getAttribute("target")))return;e.preventDefault();var r,n=$;if(r=n&&S.checkIfSameRoute(t.matched,n.info)&&t.hasAttribute("lt-prop-refresh-route")?S.getRouteInstance(t.getAttribute("lt-prop-refresh-route")).refresh():S.transitionTo(t.matched),transitionData=t.getAttribute("lt-prop-td"),transitionData){try{transitionData=JSON.parse(transitionData)}catch(e){}r.data=transitionData}}}},!0),S.checkIfSameRoute=function(e,t){if(e.route==t.route&&e.dynamicParams.length===e.dynamicParams.length&&I(e.queryParams,t.queryParams)){if(e.dynamicParams.length)for(var r=0;r<=e.dynamicParams.length;r++)return e.dynamicParams[r]==t.dynamicParams[r];return!0}return!1},S.addRoutes=function(e){Object.assign(this.instance.routes,o.call(this,e))},S.replaceWith=function(){var e=A.apply(this,arguments);return e.replace=!0,i(e)},S.transitionTo=function(){return i(A.apply(this,arguments))},S.getURL=function(){var e=u(A.apply(this,arguments));return H.history?s(e,!0):e},S.getRoute=function(e){var t=T(s(e),!0);return t&&(t.dynamicParams=t.dynamicParams.filter(function(e){return void 0!==e}),t.route=t.route.join(".")),t},r.prototype.init=function(e){var t=this;return this.handler=function(e){var r;r=t.history?S.getLocation():a((e&&e.newURL||K.hash).replace(/.*#/,"")),D={fromHistory:!0},e&&history.state&&(D.data=history.state),c(r)},z.init(this.handler,this.history),this.history?S.getLocation()&&this.handler():(D={fromHistory:!0},c(S.getLocation())),this},S.getLocation=function(){if(H.history){var e=a(K.pathname+K.search);return e=s(e),g(e)}return g(a(K.hash.replace(/^(#\/|#|\/)/,"")))};var G={get:function(e,t){return e[t+"Loaded"]},set:function(e,t){F[e]&&(F[e].$.forEach(function(e){var r=$.routeInstances[e.index];if(e.resolve&&e.resolve(),"error"==t.type){var n=getRequirementsErrorType(e.type);r[n]?r[n].push(t):r[n]=[t]}}),delete F[e])}};getRequirementsErrorType=function(e){return"_dependencies"==e?"_errorDependencies":"_errorResources"},l.prototype.run=function(){function e(e,t){return{queryParams:this.currentRoutes[e]._queryParams,dynamicParam:this.currentRoutes[e]._dynamicParams}}function t(e,t){if(e){var n=$.currentPromise.hook;stopTrans=p(["getResources","getDependencies"],n);try{return e.apply(t,Array.from(arguments).slice(2))}catch(e){return"getResources"==n?t._resourcesLoaded=!0:"getDependencies"==n&&(t._dependenciesLoaded=!0),void r(stopTrans,e,t)}}}function r(e,t,r){var n=$.currentPromise.hook,o=$.currentPromise.index;$.currentPromise.state;$.pause(),console.error(t),e?C(n,o,t):(console.error("Error on "+n+" of route "+r.routeName),p(["willTransition","didTransition","beforeExit"],n)?$.resume():$.abort())}function n(e,t){if(e){var n,o=arguments,i=$.currentPromise.hook;return stopTrans=p(["beforeModel","model","afterModel"],i),Promise.resolve(new Promise(function(a,s){try{n=Promise.resolve(e.apply(t,Array.from(o).slice(2)))}catch(e){return void r(stopTrans,e,t)}n.then(function(e){a(e)},function(e){console.error(e),"model"==i&&(t.currentModel=e),r(stopTrans,e,t)})}))}return Promise.resolve()}function o(e,t){$.runLoop=$.runLoop[e].filter(function(e){return e.hook!=t&&e})}function i(e,t){if(e&&e.length){var r=e[0],n=this.currentRoutes[r.index],o=this.routeInstances[r.index];if(r.state="forced",$.currentPromise=r,"beforeModel"==r.hook&&!G.get(o,"_dependencies"))return void(this.pending._dependencies=r.index);a(r),c[r.hook].call(this,r.hook,r.index).then(function(t){switch(r.hook){case"model":this.routeInstances[r.index].currentModel=t;break;case"afterModel":n._fetchStatus="completed",void 0!=this.pending.forceFetch&&this.pending.forceFetch==r.index&&$.run()}e.splice(0,1),i.call(this,e)}.bind(this))}}function a(e){var t=e.hook,r=e.index,n="previous"==e.state?M.currentRoutes[r]:$.currentRoutes[r];Lyte.log(t+" of route "+n.routeName,W,"MediumOrchid")}function s(e,t,r){var n=e[t];if(n&&n.length){var o=n[0],u=this.currentRoutes[o.index],d=this.routeInstances[o.index];if(!this.aborted&&!this.paused){if("beforeModel"==o.hook&&!G.get(d,"_dependencies"))return void(this.pending._dependencies=o.index);if("renderTemplate"==o.hook&&!G.get(d,"_resources"))return void(this.pending._resources=o.index);if("redirect"==o.hook&&u.forceFetch&&"pending"==u._fetchStatus)return this.forceFetchRunning||(i.call(this,this.runLoop.forceFetch),this.forceFetchRunning=!0),void(this.pending.forceFetch=o.index);o.state=t,$.currentPromise=o,a(o),Lyte.time(o.hook+o.index),c[o.hook].call(this,o.hook,o.index).then(function(i){Lyte.time(o.hook+o.index),"model"==o.hook&&(this.routeInstances[o.index].currentModel=i),n.splice(0,1),s.call(this,e,t,r)}.bind(this))}}else r&&r()}var u,c={},d=e.bind(this);c.getResources=c.getDependencies=function(e,r){var o={getDependencies:"_dependencies",getResources:"_resources"},i=this.currentRoutes[r][e],a=this.routeInstances[r],s=t(i,a,d(r));return a[o[e]+"Loaded"]=!i,!i||this.aborted||this.paused||m({route:a,req:o[e],index:r,requirements:s}),n()},c.beforeModel=c.model=c.afterModel=function(e,t){return n(this.currentRoutes[t][e],this.routeInstances[t],d(t))},c.afterModel=function(e,t){var r=this.routeInstances[t];return n(this.currentRoutes[t][e],r,r.currentModel,d(t))},C=c.onError=function(e,t,r){var n=$.routeInstances[t];console.error("Error on "+e+" of route "+n.routeName);for(var o,i=$.currentPromise.index;0<=i;i--)$.currentRoutes[i].actions&&(o=$.currentRoutes[i].actions.onError)&&0==o.call($.routeInstances[i],r,$.routeTrans,d(t),e)&&(i=-1);$.paused&&$.abort()},c.redirect=function(e,t){var r=this.routeInstances[t];return n(this.currentRoutes[t][e],r,r.currentModel,d(t))},c.afterRender=function(e,t){var r=this.routeInstances[t];return r._rendered=!0,n(this.currentRoutes[t][e],r,r.currentModel,d(t),r.component)},c.willTransition=function(e,r){var i=M.currentRoutes[r];return i.actions&&(u=i.actions[e])&&0==t(u,M.routeInstances[r],$.routeTrans)&&(o("previous",e),$.abort()),n()},c.didTransition=function(e,r){var i;return this.currentRoutes[r].actions&&(u=this.currentRoutes[r].actions[e])&&0==t(u,this.routeInstances[r],d(r))&&(i=!0,o("current",e)),!i&&r||(void 0!=$.runLoop.current.removeTemplate&&c.removeTemplate($.runLoop.current.removeTemplate),y()),n()},c.beforeExit=function(t,r){var o=M.routeInstances[r];return n(M.currentRoutes[r][t],o,o.currentModel,e.call(M,r))},c.renderTemplate=function(r,o){function i(e,t){Array.isArray(t)||"string"==typeof t?console.error("Data provided for component is not valid."):e.setData(t)}function a(e,t){var r;if(t){if(!(r=t.outletName?document.querySelector(t.outletName).querySelector(e):void 0))return a(e,t.parent)}else(r=document.querySelector(e))||console.error("There is no outlet named "+e+".");return r}var s=this.currentRoutes[o],u=this.routeInstances[o];if(void 0!=$.runLoop.current.removeTemplate&&this.currentRoutes.length==o+1&&c.removeTemplate($.runLoop.current.removeTemplate),this.currentRoutes[o][r]){var d=t(s[r],u,u.currentModel,e.apply(this,[o]));if(d&&void 0!=$.runLoop.current.removeTemplate&&c.removeTemplate($.runLoop.current.removeTemplate),d&&d.outlet){u.outletName=d.outlet;var h,f=u.currentModel;if(h=a(d.outlet,u.parent))if(d.component){var l;u.component&&u.outlet==h&&h.contains(u.component)?i(l=u.component,f):(Lyte.triggerEvent("beforeTemplateDestroy",d.outlet,u),h.innerHTML="",i(l=document.createElement(d.component),f),h.appendChild(l)),l._route=u,u.outlet=h,u.component=l}else if(d.html){u.component=void 0,u.outlet=h,Lyte.triggerEvent("beforeTemplateDestroy",d.outlet,u),h.innerHTML=d.html;var m=h.getElementsByTagName("script");m.length&&function(e,t){for(var r=0,n=e.length;r<n;r++){for(var o=e[r],i=o.parentNode,a=document.createElement("script"),s=0,u=o.attributes.length;s<u;s++)a.setAttribute(o.attributes[s].name,o.attributes[s].value);a.innerHTML=o.innerHTML,i.appendChild(a),i.removeChild(o)}}(Array.from(m))}}}return n()},c.removeTemplate=function(e){if(M)for(var t,r=M.routeInstances.length-1;r>=e;r--)(t=M.routeInstances[r]).outlet&&(t.component&&(t.component._route=void 0),Lyte.triggerEvent("beforeTemplateDestroy",t.outletName,t),t.outlet.innerHTML="");return delete $.runLoop.current.removeTemplate,U.length&&(U.forEach(function(e){J[e]&&(J[e].tag.remove(),delete J[e])}),U=[]),n()},function(){this.pending={},new Promise(function(e,t){this.runningPromise={resolve:e,reject:t},s.call(this,this.runLoop,"previous",e)}.bind(this)).then(function(){k?(S.beforeRouteTransition(j&&j.routeTrans||M&&M.routeTrans||void 0,$.routeTrans,k),$.running=!0,k.data=$.routeTrans.data,z.addToHistory(k),k=void 0):$.routeTrans.data&&z.addToHistory({data:$.routeTrans.data,type:"replaceState"}),s.call(this,this.runLoop,"current")}.bind(this),function(e){"aborted"!=e&&(console.error(e),console.log("Promise is rejected"))})}.call(this),document.title=this.title=this.routeInstances[this.routeInstances.length-1].title||document.title},r.frameQueryParams=function(e){if(e&&p(e,"=")){var t={},r=p(e,"?")?e.split("?")[1]:e;return(r=p(r,"&")?r.split(/&/g):[r]).forEach(function(e){var r=e.split("=");t[r[0]]=r[1]?decodeURIComponent(r[1]):r[1]}),t}},r.frameDynamicParams=function(e,t){if(e){var r,n=H.routes,o=[],i=P(e.split("?")[0]);return t.route.forEach(function(e,t,s){if((n=f([e],n)).$.wildcard)if(n.$.sufix.length){var u=i.slice(0,i.indexOf(n.$.sufix[0]));o.push(decodeURI(u.join("/"))),a(u.concat(n.$.sufix))}else o.push(decodeURI(i.join("/")));else n.$.dynamicKey?(r=i[n.$.dynamicIndex],a(P(n.$.path)),o.push(decodeURI(r))):(a(P(n.$.path)),o.push(void 0))}),o;function a(e){e.forEach(function(){i.shift()})}}},S.registerRoute=function(e,t,r){r&&r.mixins&&(Array.isArray(r.mixins)||(r.mixins=[r.mixins]),r.mixins.forEach(function(e){var r=Lyte.registeredMixins[e];if(r)for(var n in r)t[n]=r[n]})),t._objPath=e.replace(/\//g,".");var n=(e=e.split(".")).length-1;t.routeName=e[n],V.set(e,t)},S.getRouteInstance=function(e){if(this.instance&&$&&$.routeInstances){if("*"==e)return $.routeInstances;e=e||$.target;var t;return $.routeInstances.every(function(r,n){return(r=$.routeInstances[$.routeInstances.length-1-n])._objPath!=e||(t=r,!1)}),t}},r.initRoute=function(e){var t,r=e.route.length,n=[],o=["getResources","getDependencies","beforeModel","model","afterModel","redirect","renderTemplate","afterRender","beforeExit"];w=function(e,t,r){if(r){for(var i in r)p(["_queryParams","_dynamicParams"],i)?this[i]=e[i]:this[i]=r[i];this.component&&(this.component._route=this)}else for(var i in e)p(o,i)||(this[i]=e[i]);this.parent=n[t-1],this.transition=$.routeTrans,this.replaceWith=S.replaceWith,this.transitionTo=S.transitionTo,this.refresh=function(){$.abort();var e={currentRoutes:$.currentRoutes,matched:$.matched};return e.runLoop=d($.currentRoutes,$.matched,M,this._objPath),k={type:"replaceState",data:$.data,title:document.title,fromHistory:!1},c(void 0,e),$.routeTrans},this.setTitle=function(e){document.title=this.title=e},this.getQueryParams=function(){return this._queryParams},this.getDynamicParam=function(){return this._dynamicParams},this.getRouteInstance=function(e){return S.getRouteInstance(e)},this.setQueryParams=function(e,t,r){var n={},o={};if("object"==typeof e){for(var i in e)n[i]=e[i];r=t}else n[e]=t;if(o.route=Array.from($.matched.route),o.dynamicParams=Array.from($.matched.dynamicParams),o.queryParams=Object.assign({},$.matched.queryParams,n),!I($.matched.queryParams,o.queryParams)){var a=u(o),s=R(o);k={type:"pushState",data:$.data,url:a,title:document.title,fromHistory:!1},0==r&&(s.runLoop=[]),c(a,s)}return $.routeTrans},this.init&&this.init(),"undefined"!=typeof LyteComponent&&(this.throwEvent=LyteComponent.throwEvent)};for(var i=j||M,a=!0,s=0;s<r;s++){if(!(t=V.get($.matched._routes[s])))return!1;i&&a&&i.matched&&i.matched.route[s]==e.route[s]?n.push(new w(t,s,i.routeInstances[s])):(n[s]=new w(t,s),a=!1)}return n}}(window);
function noop(){}function onDomContentForLyte(){document.body.appendChild(LyteComponent.lyteComponentsDiv);let e=["focus","focusin","focusout","resize","scroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","contextmenu"];for(let n=0;n<e.length;n++){var t=e[n];document.body.addEventListener(t,globalEventHandler,!0)}let n=LyteComponent.toBeRegistered;if(n.length){for(let e=0;e<n.length;e++)customElements.define(n[e].name,n[e].def);LyteComponent.toBeRegistered=[]}}function getMustache(e){if(e=e&&"string"==typeof e?e.trim():e,/^{{(?=[\s]*[\w-_]+)/.test(e)){let t=e.match(/{{[a-zA-Z0-9_.[\]()]*(?![\\])}}/g);if(t&&t.length>1)return;if(!this.syntaxCheck(e)||!/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}$/.test(e))return;let n=e.match(/[\w!@#$%^&*)(+=.,_-]+[\s]*[(]{0,1}(?:"([^"]|\\")*?"|'([^']|\\')*?'|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?[)]{0,1}[\s]*(?=}})/g);if(n&&n.length>1)return;return n=n?n[0].trim():n}}function getHelper(e){let t=/\((?:[^)]*|(?:(?:"(?:[^"\\]|\\.)*?")|(?:'([^'\\]|\\.)*?')|[\w\s!@#$%^&*)([\]+=.,_-]*?)*?)\)$/.exec(e);if(t)return getHelperInfo(e,t)}function getHelperInfo(e,t){let n={};n.name=e.substr(0,t.index).replace(/\s/g,"");let o=getHelperArgs((t=t?t[0].trim():t).substr(1,t.length-2));return!1!==o&&(n.args=o,n)}function getHelperArgs(e){let t,n=[],o=[],r=0;for(let i=0;i<e.length;i++)if(n.length||","!==e.charAt(i))"("===e.charAt(i)?"'"==t&&'"'==t||(n.push(e.charAt(i)),t=e.charAt(i)):")"===e.charAt(i)?"("===n[n.length-1]&&n.pop():"'"===e.charAt(i)&&"\\"!==e.charAt(i-1)?"'"===n[n.length-1]?n.pop():'"'!==n[n.length-1]&&(n.push(e.charAt(i)),t=e.charAt(i)):'"'===e.charAt(i)&&"\\"!==e.charAt(i-1)&&('"'===n[n.length-1]?n.pop():"'"!==n[n.length-1]&&(n.push(e.charAt(i)),t=e.charAt(i)));else{let t=e.substr(r,i-r);(t=t.trim())&&t.startsWith('"')&&t.endsWith('"')&&(t="'"+(t=t.slice(1,-1))+"'"),t=getHelperArgValue(t),o.push(t),r=i+1}let i=e.substr(r,e.length-r);return(i=i.trim())&&i.startsWith('"')&&i.endsWith('"')&&(i="'"+(i=i.slice(1,-1))+"'"),i=getHelperArgValue(i),o.push(i),o}function syntaxCheck(e){for(var t,n=[],o=0;o<e.length;o++)"'"===e[o]?"'"===t&&"\\"!==e[o-1]?(n.pop(),t=void 0):n.length||(t=e[o],n.push(t)):'"'===e[o]&&('"'===t&&"\\"!==e[o-1]?(n.pop(),t=void 0):n.length||(t=e[o],n.push(t)));return!n.length}function doCompile(e,t,n){for(let o=0;o<t.length;o++){let r=t[o],i=r.type,s=r.position,a=this.getDynamicNode(e,s);switch(i){case"text":{let e,t=this.getMustache(a.nodeValue);t&&(e=this.getHelper(t));let n=this.getMustache(a.nodeValue);e?r.helperInfo=e:n&&(r.dynamicValue=n)}break;case"attr":{let e=!1,t=[],o=[],i=a,s=r.attr={};for(let r=0;r<i.attributes.length;r++)if(-1!==i.attributes[r].nodeValue.indexOf("{{")){let a,l=i.attributes[r].nodeValue,p=this.getMustache(l);if(p?a=this.getHelper(p):/{{.*}}/.test(l)&&!/\\{{.*}}/.test(l)&&(a=this.splitMixedText(l)),a&&("action"===a.name||"method"===a.name)&&/^(onfocus|onfocusin|onfocusout|onresize|onscroll|onclick|ondblclick|onmousedown|onmouseup|onmousemove|onmouseover|onmouseout|onmouseenter|onmouseleave|onchange|onselect|onsubmit|onkeydown|onkeypress|onkeyup|oncontextmenu)$/.test(i.attributes[r].name)){s[i.attributes[r].name.substr(2)]={name:i.attributes[r].name.substr(2),helperInfo:a,globalEvent:!0};let e=deepCopyObject(a.args),o=e.splice(0,1)[0];o=o.startsWith("'")?o.replace(/'/g,""):o;let l=this.getArgString(o,e);i.setAttribute(i.attributes[r].name.substr(2),n+" => "+l),t.push(i.attributes[r].name)}else if(a||p){let n={};i.attributes[r].name.startsWith("lbind:")?(t.push(i.attributes[r].name),o.push({name:i.attributes[r].name.substring(6),value:i.attributes[r].nodeValue}),n.isLbind=!0,n.name=i.attributes[r].name.substring(6)):n.name=i.attributes[r].name,a?"lbind"===a.name?(n.dynamicValue=a.args[0],n.isLbind=!0):n.helperInfo=a:n.dynamicValue=p,e=!0,s[n.name]=n}}if(t.length)for(let e=0;e<t.length;e++)i.removeAttribute(t[e]);if(o.length)for(let e=0;e<o.length;e++)i.setAttribute(o[e].name,o[e].value)}break;case"for":case"forIn":case"component":case"registerYield":doCompile(a.content,r.dynamicNodes,n);break;case"if":case"switch":for(let e in r.cases)doCompile(a.content.querySelector("[case='"+e+"']").content,r.cases[e].dynamicNodes,n);r.default.dynamicNodes&&doCompile(a.content.querySelector("[default]").content,r.default.dynamicNodes,n)}}}function getDynamicNode(e,t){let n=e;for(var o=0;o<t.length;o++)n="TEMPLATE"!=n.tagName?n.childNodes[t[o]]:n.content.childNodes[t[o]];return n}function splitMixedText(e){for(var t=[],n=0,o={name:"concat",args:[]},r=0;r<e.length;r++){var i=r;if("\\"!==e[r-1]&&"{"===e[r]&&"{"===e[++r])t.push("{{"),o.args.push("'"+e.substr(n,i-n)+"'"),n=r+1;else if("}"===e[r]&&"}"===e[++r]&&t.length){t.pop(n);var s=e.substr(n,i-n),a=this.getHelper(s);a?(s=a,o.args.push({type:"helper",value:s})):o.args.push(s),n=r+1}}return n<e.length&&o.args.push("'"+e.substr(n,e.length-n)+"'"),o}function getHelperArgValue(e){switch(e){case"undefined":return;case"true":return!0;case"false":return!1;case"null":return null;case"":return;default:return e&&e.startsWith("'")&&e.endsWith("'")?e:/\([\w\s,')(]*/.test(e)?{type:"helper",value:getHelper(e)}:isNaN(e)?e:parseInt(e)}}function deepCopyObject(e){for(var t,n,o,r,i,s,a=[{source:e,target:Object.create(Object.getPrototypeOf(e))}],l=[e],p=a[0].target,c=[p];t=a.shift();)for(n=Object.getOwnPropertyNames(t.source),o=0;o<n.length;o++)(r=Object.getOwnPropertyDescriptor(t.source,n[o])).value&&"object"==typeof r.value?(i=r.value,r.value=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),-1==(s=l.indexOf(i))?(l.push(i),c.push(r.value),Object.defineProperty(t.target,n[o],r),a.push({source:i,target:r.value})):(r.value=c[s],Object.defineProperty(t.target,n[o],r))):Object.defineProperty(t.target,n[o],r);return p}function getArgString(e,t){let n;for(let e=0;e<t.length;e++)"object"==typeof t[e]&&(t[e]=this.getArgString(t[e].value.name,t[e].value.args));return n=e?e+"("+t.toString()+")":t.toString()}window.Lyte||console.error("Lyte is not defined"),navigator.userAgent.match(/rv:11/)&&(window.action=function(){}),Lyte.Component={},Lyte.arrayUtils=function(){return LyteComponent.arrayFunctions.apply(LyteComponent,arguments)},Lyte.objectUtils=function(){return LyteComponent.objectFunctions.apply(LyteComponent,arguments)},Lyte.Component.register=function(){LyteComponent.registerComponent.apply(LyteComponent,arguments)},Lyte.Component.registerHelper=function(){LyteComponent.registerHelper.apply(LyteComponent,arguments)},Lyte.Component.set=function(){LyteComponent.set.apply(LyteComponent,arguments)},Lyte.Component.registeredHelpers={},Lyte.Component.registeredComponents={},Lyte.Component.unregisterComponent=function(e){if(Lyte.Component.registeredComponents[e]){var t=LyteComponent._registeredComponents[e];t.activeInstances>0?console.warn("There are active instances of the component "+e+" and hence cannot be unregistered"):(t._properties={},t.component=null,t._mixins=null,t._actions=null,t._template=null,t._dynamicNodes=null,t._callBacks={},t._observers=[],t._data=void 0,t._methods={},t.prototype.get=noop,t.prototype.set=noop,delete Lyte.Component.registeredComponents[e])}else console.warn("Component "+e+" not yet registered")};var elementPrototype="undefined"!=typeof HTMLElement?HTMLElement:Element;document.addEventListener("change",function(e){var t=e.target||e.srcElement;if(!t._attributeDetails)return;var n="value";"checkbox"!==t.type&&"radio"!==t.type||(n="checked");let o=[];var r=t._attributeDetails[n];if(!r||!r.isLbind)return;var i=t;if(!t._callee){for(;i&&!LyteComponent.isCustomElement(i)&&"LYTE-YIELD"!==i.tagName;){if("BODY"===i.tagName){i=null;break}i=i.parentNode}i&&"LYTE-YIELD"===i.tagName?t._callee=i._callee._callee:t._callee=i}let s=t._callee;t&&LyteComponent.newAddContext(t,o);let a=LyteComponent.getNew(s.component.data,r.dynamicValue);LyteComponent.set(a.context,a.lastKey,t[n]),t&&LyteComponent.newRemoveContext(t,o)});var globalEventHandler=function(e){var t,n=e.type,o=e.target;for(window.event||(t=!0,window.event=e);!o.getAttribute(n)&&"BODY"!=o.tagName;)o=o.parentNode;var r=o;if(!o._callee){for(;r&&!LyteComponent.isCustomElement(r)&&"LYTE-YIELD"!==r.tagName;){if("BODY"===r.tagName){r=null;break}r=r.parentNode}r&&"LYTE-YIELD"===r.tagName?o._callee=r._callee._callee:o._callee=r===o?void 0:r}if(o._evBoundEvents&&o._evBoundEvents[n]){o._callee?o._callee.constructor._actions:o.constructor._actions;let t=o._evBoundEvents[n],r=Lyte.deepCopyObject(t);r.args.shift(),LyteComponent.throwAction.call(o,o,n,r,void 0,void 0,o,e)}else if(o.getAttribute(n)){o._callee.constructor._actions,o.getAttribute(n).split(" => ")[1];let t=o._boundEvents[n],r=Lyte.deepCopyObject(t);r.args.shift(),LyteComponent.throwAction.call(o._callee,o._callee,n,r,void 0,void 0,o,e)}if("LABEL"===o.tagName){var i=o.querySelector("input");if(i.getAttribute(n)){o._callee.constructor._actions,i.getAttribute(n).split(" => ")[1];let t=o._boundEvents[n],r=Array.from(t.args),s=Object.assign({},t);r.shift(),s.args=r,LyteComponent.throwAction.call(o._callee,o._callee,n,s,void 0,void 0,i,e)}}t&&(window.event=void 0)};class LyteYield extends HTMLElement{disconnectedCallback(){if(LyteComponent.ignoreDisconnect)return;var e=[];LyteComponent.newAddContext(this,e),LyteComponent.removeSelectedBindingDeep(this._properties,this.component.data);let t=this._registerYield;if(t){var n=[];LyteComponent.newAddContext(t,n);for(let e in this._dynamicProperty)this._dynamicProperty[e].isActualNode?this._dynamicProperty[e].isActualNode._helperNodes.delete(this):t._callee.getProperty(e)._helperNodes&&t._callee.getProperty(e)._helperNodes.delete(this);this._dynamicProperty={};for(let e=0;e<this._helpers.length;e++)t._callee.removeHelpers(this._helpers[e]);this._helpers=[],LyteComponent.newRemoveContext(t,n),LyteComponent.newRemoveContext(this,e)}}getProperty(e){let t=e.split("."),n=this;n._properties[t[0]]||(n._properties[t[0]]={}),n=n._properties[t[0]],Object.defineProperty(n,"_path",{enumerable:!1,value:t[0]});for(let e=1;e<t.length;e++)n[t[e]]||(n[t[e]]={},Object.defineProperty(n[t[e]],"_path",{enumerable:!1,value:n._path+"."+t[e]})),n=n[t[e]];return n}}customElements.define("lyte-yield",LyteYield);class customElementPrototype extends elementPrototype{constructor(){if(super(),!Lyte.Component.registeredComponents[this.localName])return;this.constructor.activeInstances++,this.component=new this.constructor.component,this.data={},this._properties={},this.component.methods={},this.component.data={};let e=this.constructor._data?this.constructor._data():{};for(let t in e)this.component.data[t]=e[t].default;this.component.data.errors={},this.component.__data=e;for(let e in this.constructor._methods)this.component.methods[e]=this.constructor._methods[e];Object.defineProperty(this.component.data,"__component__",{value:this,configurable:!0,writable:!0,enumerable:!1}),this.component.$node=this,this.callback("constructor"),this._actions=this._actions?this._actions:{},this._callee=this._callee||this.getCallee(this.parentNode)}ltProp(){let e=arguments.length,t=arguments[0];if(!t){let e={};for(let t in this.component.data)if(t.startsWith("ltProp")){let n=t.substring(6);e[n=LyteComponent.String.lowerCaseFirstLetter(n)]=this.component.data[t]}return e}if("string"==typeof t){if(!(e>1)){let e="ltProp"+LyteComponent.String.upperCaseFirstLetter(t);return this.component.data[e]}this.set("ltProp"+LyteComponent.String.upperCaseFirstLetter(t),arguments[1])}else if("object"==typeof t)for(let e in t){let n="ltProp"+LyteComponent.String.upperCaseFirstLetter(e);this.set(n,t[e])}}getMethods(e){return this.component.getMethods(e)}setMethods(e,t){return this.component.setMethods(e,t)}getData(e){return this.component.getData(e)}setData(e,t){return this.component.setData(e,t)}getCallee(e){for(;e&&!LyteComponent.isCustomElement(e)&&"LYTE-YIELD"!==e.tagName;){if("BODY"===e.tagName){e=null;break}e=e.parentNode}return e&&"LYTE-YIELD"===e.tagName?e._callee._callee:this===e?void 0:e}afterConnected(){let e=this.constructor._observedAttributes;for(let t=0;t<e.length;t++){let n=e[t],o=this.getProperty(n);Object.defineProperty(o,"__fromComponent",{value:!0,enumerable:!1})}if(this.getProperty("errors"),this._initProperties){let e=this._initProperties;for(let t in e)this.component.data[t]=e[t];this._initProperties=void 0}if(this._initMethods){let e=this._initMethods;for(let t in e)this.component.methods[t]=e[t];this._initMethods=void 0}this.callback("init"),this.onCallBack("init"),this.registerYields();return this.renderNodes(this.constructor._template.content,this.constructor._dynamicNodes,void 0,void 0)}getDynamicNode(e,t){let n=e;for(var o=0;o<t.length;o++)n="TEMPLATE"!=n.tagName?n.childNodes[t[o]]:n.content.childNodes[t[o]];return n}renderNodes(e,t,n,o,r,i){o=o||{};let s;if(navigator.userAgent.match(/rv:11/)){let t=e.cloneNode(!0,"lyte");this.constructor.splitTextNodes(t),s=t}else s=e.cloneNode(!0,"lyte");let a,l=[],p=[];for(let e=0;e<t.length;e++){let i=t[e],d=i.type,m=i.position,u=s;if(u=this.getDynamicNode(u,m),"componentDynamic"===d)o.node?u._contextSwitchInfo=o:n&&(u._contextSwitchInfo=n._contextSwitchInfo);else if("text"===d)this.bindNode(u,void 0,n,o,t[e],p,r);else if("attr"===d){if(u._attributeDetails=i.attr,"LYTE-YIELD"===u.nodeName){u._callee=this,u.component={},u.component.data={},Object.defineProperty(u.component.data,"__component__",{value:u,configurable:!0,writable:!0,enumerable:!1}),u._properties={};for(let e=0;e<u.attributes.length;e++){let t=u.attributes[e];"is"!==t.nodeName&&"yield-name"!==t.nodeName&&(u._properties[LyteComponent.String.toCamelCase(t.nodeName)]={})}}let e=[];for(let t in i.attr){let s=i.attr[t],a=t;if(s&&(s.dynamicValue||s.helperInfo))if(o.node?u._contextSwitchInfo=o:n&&(u._contextSwitchInfo=n._contextSwitchInfo),s.globalEvent){u._boundEvents=u._boundEvents||{};let e,t=s.helperInfo.args[0];t.startsWith('"')||t.startsWith("'")?e=t.substring(1,t.length-1):(console.warn("Deprecation warning. Action name "+t+" must be in quotes"),e=t),u._boundEvents[a]={name:e,args:s.helperInfo.args}}else{var c=this.bindNode(u.getAttributeNode(a),e,n,o,s,void 0,r);c!==u.getAttributeNode(a)&&(u._removedAttributes=u._removedAttributes||{},u._removedAttributes[a]=c)}}i.attr&&Object.keys(i.attr).length&&(u._callee=this);for(let t=0;t<e.length;t++)u.removeAttribute(e[t])}else if(/^(for|forIn|component)$/.test(d)){o.node?u._contextSwitchInfo=o:n&&(u._contextSwitchInfo=n._contextSwitchInfo),u._dynamicNodes=i.dynamicNodes;let e;switch(d){case"for":e=this.updateForHelper(u,{type:"default"},o.node?o:void 0);break;case"forIn":e=this.updateForInHelper(u,{type:"default"},o.node?o:void 0);break;case"component":e=this.updateDynamicComponent(u,!1,o.node?o:void 0)}e&&l.push(e)}else if(/^(if|switch)$/.test(d)){u._cases=i.cases,u._default=i.default,o.node?u._contextSwitchInfo=o:n&&(u._contextSwitchInfo=n._contextSwitchInfo);let e=this.updateSwitchHelper(d,u,o.node?o:void 0);if(e){l.push(e);if(e.toAppendMain.querySelector("template[is=break]")){u._isStopped="break",s=this.constructor.getTrimmedContent(s,i.position,void 0),a=i.position;break}if(e.toAppendMain.querySelector("template[is=continue]")){u._isStopped="continue",s=this.constructor.getTrimmedContent(s,i.position,void 0);break}}}else"registerYield"===d?(u._dynamicNodes=i.dynamicNodes,o.node?u._contextSwitchInfo=o:n&&(u._contextSwitchInfo=n._contextSwitchInfo),u._callee=this):"insertYield"===d&&(o.node?u._contextSwitchInfo=o:n&&(u._contextSwitchInfo=n._contextSwitchInfo),u.component=u.component||{data:{}},u._properties=u._properties||{},this.updateYield(u,!1,o.node?o:void 0))}for(let e=0;e<p.length;e++){let t=p[e].dynamicPositions,n=t.initialNode,o=t.dynamicNodeValue,r=o.childNodes.length;r||(o.appendChild(document.createTextNode("")),r=1);let i=o.childNodes[0];n.replaceWith.apply(n,o.childNodes),p[e].dynamicPositions={startingNode:i,length:r}}return a&&((i=i||{}).stop=!0),n?o.type?(n._helpers[o.itemIndex]=l,s):(n._helpers=l,s):(this.executeBlockHelpers(l),s)}executeBlockHelpers(e,t){for(let t=0;t<e.length;t++)e[t].lastNode.parentNode.insertBefore(e[t].toAppendMain,e[t].lastNode),e[t]=e[t].lastNode}updateBlockHelpers(e,t){for(let n=0;n<e.length;n++)switch(e[n].getAttribute("is")){case"for":this.updateForHelper(e[n],{type:"default"},t);break;case"if":this.updateSwitchHelper("if",e[n],t);break;case"forIn":this.updateForInHelper(e[n],{type:"default"},t);break;case"switch":this.updateSwitchHelper("switch",e[n],t);break;case"component":this.updateDynamicComponent(e[n],!1,t);break;case"insertYield":break;case"yield":case"registerYield":t&&(e[n]._contextSwitchInfo=t);break;default:"LYTE-YIELD"===e[n].tagName&&this.updateYield(e[n],!1,t)}}static get observedAttributes(){let e=[];for(let t=0;t<this._observedAttributes.length;t++)e[t]=LyteComponent.String.dasherize(this._observedAttributes[t]);return e.push("lt-prop"),e}attributeChangedCallback(e,t,n){if(this.constructor._observedMethodAttributes&&this.constructor._observedMethodAttributes[e])return;if("lt-prop"===e){let e=n;if(e)try{e=JSON.parse(e);for(let t in e){let n="ltProp"+LyteComponent.String.upperCaseFirstLetter(t);this.set(n,e[t])}}catch(e){console.error("Error while parsing lt-data")}return}if(null===n||t===n)return;let o=LyteComponent.String.toCamelCase(e);switch(this.component.__data[o].type){case"boolean":n=!(!n||"false"===n);break;case"object":try{(n=JSON.parse(n))instanceof Object||console.warn("data type of the value provided for attribute "+e+" of "+this+" is not valid")}catch(t){return void console.warn("attribute "+e+" is not a valid JSON string.")}break;case"array":try{(n=JSON.parse(n))instanceof Array||console.warn("data type of the value provided for attribute "+e+" of "+this+" is not valid")}catch(t){return void console.warn("attribute "+e+" is not a valid JSON string.")}break;case"number":{let t=+n;if(n!==t+"")return void console.warn("data type of the value provided for attribute "+e+" of "+this+" is not valid");n=t}}this.component.data[o]!==n&&this.set(o,n)}removeHelpersSpecificIndex(e,t){if(e._helpers[t])for(let n=0;n<e._helpers[t].length;n++)this.removeHelpers(e._helpers[t][n]);if(e._forContent[t]){for(let n=0;n<e._forContent[t].length;n++)e._forContent[t][n].remove();e._items[t]={_dynamicProperty:{},itemProperty:{},indexProperty:{}}}}removeHelpers(e,t){var n=[];if(LyteComponent.newAddContext(e,n),e._forContent)if("for"===e.getAttribute("is")){if(e._helpers)for(let t=0;t<e._helpers.length;t++){for(let n=0;n<e._helpers[t].length;n++)this.removeHelpers(e._helpers[t][n]);e._helpers[t]=[]}for(let t=0;t<e._forContent.length;t++)for(let n=0;n<e._forContent[t].length;n++)e._forContent[t][n].remove();let n=e.getAttribute("item");if(e._items.length){let t=e._items[0].itemProperty,o=e._items[0]._dynamicProperty;for(let t in o){let n=this.getProperty(t);n._helperNodes&&n._helperNodes.delete(e)}if(t)for(let t=0;t<e._items.length;t++)this.removeBindings({[n]:e._items[t].itemProperty},{[n]:e._attributes.items[t]})}t||e._actualBinding&&(e._attributes.items&&e._attributes.items._bindings&&e._actualBinding._createdBinding&&e._attributes.items._bindings.delete(e._actualBinding),e._actualBinding._forHelpers&&e._actualBinding._forHelpers.delete(e),e._removedAttributes&&e._removedAttributes.items&&e._removedAttributes.items._multipleProperty&&e._removedAttributes.items._multipleProperty.actProp._forHelpers.delete(e)),e._items=[]}else{if(e._helpers){let t=Object.keys(e._helpers);for(let n=0;n<t.length;n++){for(let o=0;o<e._helpers[t[n]].length;o++)this.removeHelpers(e._helpers[t[n]][o]);e._helpers[t[n]]=[]}}for(var o in e._forContent)for(let t=0;t<e._forContent[o].length;t++)e._forContent[o][t].remove();let n=e._items,r=e.getAttribute("key");for(let t in n){let o=n[t],i=o.itemProperty,s=o._dynamicProperty;for(let t in s){let n=this.getProperty(t);n._helperNodes&&n._helperNodes.delete(e)}if(i)for(let t in e._items)this.removeBindings({[r]:e._items[t].itemProperty},{[r]:e._attributes.object[t]})}t||(e._actualBinding&&(e._attributes.object&&e._attributes.object._bindings&&e._actualBinding._createdBinding&&e._attributes.object._bindings.delete(e._actualBinding),e._actualBinding._forHelpers&&e._actualBinding._forHelpers.delete(e)),e._removedAttributes.items&&e._removedAttributes.items._multipleProperty&&e._removedAttributes.items._multipleProperty.actProp._forHelpers.delete(e),e._propBindingObject&&e._attributes.object&&e._attributes.object._bindings&&e._attributes.object._bindings.delete(e._propBindingObject)),e._items={}}else if(e._caseContent||e._yieldContent){if(e._helpers){for(let t=0;t<e._helpers.length;t++)this.removeHelpers(e._helpers[t]);e._helpers=[]}if(e._caseContent){for(let t=0;t<e._caseContent.length;t++)e._caseContent[t].remove();for(let t in e._dynamicProperty)e._dynamicProperty[t].isActualNode?e._dynamicProperty[t].isActualNode._helperNodes.delete(e):this.getProperty(t)._helperNodes&&this.getProperty(t)._helperNodes.delete(e);e._dynamicProperty={}}else{for(let t=0;t<e._yieldContent.length;t++)e._yieldContent[t].remove();e._dynamicProperty={}}}else if(e._renderedComponent){e._renderedComponent[e._currentComponent]&&e._renderedComponent[e._currentComponent].remove();for(let t in e._renderedComponent)e._renderedComponent[t]=null}LyteComponent.newRemoveContext(e,n)}updateYield(e,t,n){e._callee||(e._callee=this);let o=e._callee._yields[e.getAttribute("yield-name")];if(!o)return;let r=o._callee||e._callee._callee;if(!r)return void e.appendChild(o.content.cloneNode(!0,"lyte"));o._callee||(o._callee=r),e._dynamicProperty=e._dynamicProperty||{};let i={},s=[];LyteComponent.newAddContext(o,s),Object.keys(e._properties).forEach(function(t){i[t]={},i[t].value=r.component.data[t],i[t].property=r._properties[t],r._properties[t]=e._properties[t],r.component.data[t]=e.component.data[t]});let a=r.renderNodes(o.content,o._dynamicNodes,e,{node:e},!0);LyteComponent.establishBindings(e._properties,e.component.data),r.executeBlockHelpers(e._helpers),Object.keys(e._properties).forEach(function(e){r.component.data[e]=i[e].value,r._properties[e]=i[e].property}),LyteComponent.newRemoveContext(o,s),e.appendChild(a),e._registerYield=o}updateDynamicComponent(e,t,n){let o;e._callee=this;let r=e.hasAttribute("lyte-keep-alive");e._renderedComponent=e._renderedComponent||{},e._contextSwitchInfo=n||e._contextSwitchInfo,e._dynamicProperty=e._dynamicProperty||{};let i=e.getAttribute("component-name")||(e._attributes?e._attributes["component-name"]:void 0);if(!i)return;let s,a=!1;if(t?(r&&(LyteComponent.ignoreDisconnect=!0),e._renderedComponent[e._currentComponent]&&e._renderedComponent[e._currentComponent].remove(),LyteComponent.ignoreDisconnect=!1,r||(e._dynamicProperty={}),e._renderedComponent[i]&&r?s=e._renderedComponent[i]:(s=document.createElement(i),a=!0)):(s=document.createElement(i),a=!0),!r&&e._currentComponent&&(e._renderedComponent[e._currentComponent]=null),a){for(let t=0;t<e.attributes.length;t++)"is"!==e.attributes[t].name&&"component-name"!==e.attributes[t].name&&"lyte-keep-alive"!==e.attributes[t].name&&s.setAttribute(e.attributes[t].name,e.attributes[t].value);if(e._attributes)for(var l in e._attributes)"component-name"!==l&&s.setData(LyteComponent.String.toCamelCase(l),e._attributes[l]);let t=this.renderNodes(e.content,e._dynamicNodes,e,void 0);s.appendChild(t)}return a&&(s._toRegEvnts=e._toRegEvnts),t?e.parentNode.insertBefore(s,e):o={toAppendMain:s,lastNode:e},e._renderedComponent[i]=s,e._currentComponent=i,s._callee=this,s._actions=e._actions,s.setMethods(e._initMethods),s._attributeDetails=e._attributeDetails,s._boundEvents=e._boundEvents,o}updateForHelper(e,t,n){e._callee=this,e._attributes=e._attributes||{},e._contextSwitchInfo=n||e._contextSwitchInfo;let o=e.getAttribute("index");o||(e.setAttribute("index","index"),o="index");let r=e.getAttribute("item");r||(e.setAttribute("item","item"),r="item");let i=this.component.data[r],s=this.component.data[o],a=this._properties[r],l=this._properties[o];this._properties[r]=this._properties[o]={};let p=e._attributes.items,c=e.content,d=e._dynamicNodes,m=e;e._items||(e._items=[]);let u,h,f=t.firstIndex,_=t.secondIndex,g=t.thirdIndex;if(t)switch(t.type){case"remove":u=f;for(let t=f,n=_;n>0;n--,t++)this.removeHelpersSpecificIndex(e,t);for(let t=f+_;t<e._items.length;t++)e._items[t]._contextSwitchInfo.itemIndex=e._items[t]._contextSwitchInfo.itemIndex-_;e._items.splice(f,_),e._helpers.splice(f,_),e._forContent.splice(f,_);break;case"insert":{h=f,u=_,e._forContent[f]&&(m=e._forContent[f][0]);let t=[],n=[],o=[];for(let e=_,r=f;e>0;e--,r++)t.push([]),n.push({}),o.push([]);e._helpers.splice.apply(e._helpers,[f,0].concat(t)),e._items.splice.apply(e._items,[f,0].concat(n));for(let t=f+_;t<e._items.length;t++)e._items[t]._contextSwitchInfo.itemIndex=e._items[t]._contextSwitchInfo.itemIndex+_;e._forContent.splice.apply(e._forContent,[f,0].concat(o))}break;case"replace":{h=f,u=_,this.removeHelpersSpecificIndex(e,f);document.createDocumentFragment();e._forContent[f+1]&&(m=e._forContent[f+1][0]);let t=[],n=[],o=[];for(let e=_,r=f;e>0;e--,r++)t.push([]),o.push([]),n.push({});e._helpers.splice.apply(e._helpers,[f,1].concat(t)),e._items.splice.apply(e._items,[f,1].concat(n));for(let t=f+_;t<e._items.length;t++)e._items[t]._contextSwitchInfo.itemIndex=e._items[t]._contextSwitchInfo.itemIndex+_-1;e._forContent.splice.apply(e._forContent,[f,1].concat(o));break}case"splice":{h=f,u=_;for(let t=g,n=0;t>0;t--,n++)this.removeHelpersSpecificIndex(e,f+n);document.createDocumentFragment();e._forContent[f+g]&&(m=e._forContent[f+g][0]);let t=[],n=[],o=[];for(let e=_,r=f;e>0;e--,r++)t.push([]),o.push([]),n.push({});e._helpers.splice.apply(e._helpers,[f,g].concat(t)),e._items.splice.apply(e._items,[f,g].concat(n));for(let t=f+_;t<e._items.length;t++)e._items[t]._contextSwitchInfo.itemIndex=e._items[t]._contextSwitchInfo.itemIndex+_-g;e._forContent.splice.apply(e._forContent,[f,g].concat(o));break}case"update":e.getAttribute("item");for(let t=0;t<e._items.length;t++)this.removeHelpersSpecificIndex(e,t);e._items=[];case"default":e._forContent=[],e._helpers=[],h=0,u=p?p.length:0;break;default:console.error("Error in updateForHelper")}for(m||(m=e);m!==e&&"TEMPLATE"===m.tagName;){switch(m.getAttribute("is")){case"for":case"forIn":m=m._forContent[0][0]||m;break;case"if":case"switch":m=m._caseContent[0]||m;break;case"component":m=m._renderedComponent[m._currentComponent]||m}}let y;if("remove"!==t.type){var b=document.createDocumentFragment();for(let t=h,n=u;n>0;t++,n--){e._helpers[t]=[],e._items[t]={_dynamicProperty:{},itemProperty:{},indexProperty:{}},this.component.data[r]=p[t],this.component.data[o]=t,this._properties[r]={},this._properties[o]={};let n={itemValue:r,itemIndex:t,type:"for",node:e,indexValue:o};e._items[t]._contextSwitchInfo=n;let i={},s=this.renderNodes(c,d,e,n,void 0,i);if(e._items[t].itemProperty=this.getProperty(r),e._items[t].indexProperty=this.getProperty(o),LyteComponent.establishBindings({[r]:e._items[t].itemProperty},{[r]:e._attributes.items[t]}),e._forContent[t]=Array.from(s.childNodes),this.executeBlockHelpers(e._helpers[t]),b.appendChild(s),i.stop)break}"default"===t.type?y={toAppendMain:b,lastNode:m}:m.parentNode.insertBefore(b,m),e._removedAttributes&&e._removedAttributes.items&&e._removedAttributes.items._multipleProperty&&LyteComponent.establishBindings({items:e._removedAttributes.items._multipleProperty.actProp},{items:p})}for(let t=u;t<e._items.length;t++)e._items[t].indexProperty&&LyteComponent.affectChanges(e._items[t].indexProperty);return this.component.data[r]=i,this.component.data[o]=s,this._properties[r]=a,this._properties[o]=l,y}updateForInHelper(e,t,n){let o=this;e._callee=this,e._attributes=e._attributes||{},n=n||e._contextSwitchInfo,e._contextSwitchInfo=n;let r=e.getAttribute("key");r||(r="key",e.setAttribute("key","key"));let i=e.getAttribute("value");i||(i="value",e.setAttribute("value","value"));let s=o.component.data[r],a=o.component.data[i],l=o._properties[r],p=o._properties[i];o._properties[r]=o._properties[i]={};let c=e._attributes.object,d=e.content,m=e._dynamicNodes,u=e,h=[];if(e._items||(e._items={}),t)switch(t.type){case"delete":this.removeHelpersSpecificIndex(e,t.property);var f=e._keysArray.indexOf(t.property);f>-1&&e._keysArray.splice(f,1),delete e._propBindingObject[t.property];break;case"add":h=[t.property],e._keysArray.push(t.property);break;case"update":e._keysArray.forEach(function(t,n,o){this.removeHelpersSpecificIndex(e,t)},this),e._keysArray=h=c?Object.keys(c):[],e._items={},e._propBindingObject={};break;case"default":e._forContent={},e._helpers={},e._keysArray=h=c?Object.keys(c):[];break;default:console.error("Error in updateForHelper")}let _;if(!c){let e=document.createDocumentFragment();if("default"===t.type)return{toAppendMain:e,lastNode:u};u.parentNode.insertBefore(e,u)}if(c&&"remove"!==t.type){var g=document.createDocumentFragment();e._propBindingObject=e._propBindingObject||{},h.forEach(function(t,n,s){e._helpers[t]=[],e._items[t]={_dynamicProperty:{},itemProperty:{}},o.component.data[r]=t,o.component.data[i]=c[t],o._properties[r]={},o._properties[i]={};let a={itemIndex:t,itemValue:i,keyValue:r,type:"forIn",node:e};e._items[t]._contextSwitchInfo=a;let l=this.renderNodes(d,m,e,a);e._items[t].itemProperty=this.getProperty(i),e._propBindingObject[t]=e._items[t].itemProperty,e._forContent[t]=Array.from(l.childNodes),this.executeBlockHelpers(e._helpers[t]),g.appendChild(l)},this),e._attributes.object._bindings||Object.defineProperty(e._attributes.object,"_bindings",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),e._attributes.object._bindings.add(e._propBindingObject),LyteComponent.establishBindings(e._propBindingObject,e._attributes.object),"default"!==t.type?u.parentNode.insertBefore(g,u):_={toAppendMain:g,lastNode:u}}return o.component.data[r]=s,o.component.data[i]=a,o._properties[r]=l,o._properties[i]=p,_}static getArrayIndex(e,t){for(let n=0;n<e.length;n++)if(e[n]===t)return n}static getTrimmedContent(e,t,n){let o=e;if(n){t=[];let e=n.parentNode;for(;t.unshift(this.getArrayIndex(e.childNodes,n)),e=e.parentNode,n=n.parentNode,e;);}for(let n=0;n<t.length;n++){for(let o=e.childNodes.length-1;o>t[n];o--)e.childNodes[o].remove();e=e.childNodes[t[n]]}return o}updateSwitchHelper(e,t,n,o){let r=!1,i=t;t._callee||(t._callee=this,r=!0),n=n||t._contextSwitchInfo,t._contextSwitchInfo=n,t._dynamicProperty=t._dynamicProperty?t._dynamicProperty:{};let s,a;if(""===t.getAttribute("value")||t.getAttribute("value")?a=t.getAttribute("value"):t._attributes&&(a=t._attributes.value),t._currentCase&&a===t._currentCase)return;if(a)s="if"===e?"true":a.toString();else if("if"===e)s="false";else switch(a){case void 0:s="undefined";break;case null:s="null";break;case!1:s="false";break;case"":s='""'}if(s===t._currentCase)return;t._currentCase=s;let l,p=t._cases[s];if(!p&&(p=t._default,l=t.content.querySelector("[default]"),t._isDefault=!0,!l)){t._caseContent&&t._caseContent.length&&this.removeHelpers(t),t._caseContent=[];let e=document.createTextNode("");if(t._caseContent.push(e),t._currentCaseName=s,o)return void i.parentNode.insertBefore(e,t);{let t=document.createDocumentFragment();return t.append(e),{lastNode:i,toAppendMain:t}}}t._caseContent&&t._caseContent.length&&this.removeHelpers(t);let c,d=p,m=s;c=l||t.content.querySelector("[case='"+m+"']");let u=[];for(;d;){let e=d.dynamicNodes,n=this.renderNodes(c.content,e,t,void 0);if(u.push(n),!d.additional)break;d.additional.next?(c=t.content.querySelector("[case='"+d.additional.next+"']"),d=t._cases[d.additional.next]):(c=t.content.querySelector("[default]"),d=t._default)}t._caseContent=[];let h=document.createDocumentFragment();for(let e=0;e<u.length;e++)11==u[e].nodeType?t._caseContent=t._caseContent.concat(Array.from(u[e].childNodes)):t._caseContent.push(u[e]),h.append(u[e]);if(this.executeBlockHelpers(t._helpers,t),o){let e;return h.querySelector("template[is=break]")?e="break":h.querySelector("template[is=continue]")&&(e="continue"),t.parentNode.insertBefore(h,t),e}return{toAppendMain:h,lastNode:t}}dummy(e,t){this.constructor._properties[boundValue].observer}callObservers(e,t){let n=this.constructor._properties[e],o=n?n.observer:void 0;if(o)for(let e=0;e<o.length;e++)-1!==t.indexOf(".")&&o[e].path!==t||this["_"+o[e].functionName].apply(this)}static updateValue(e,t,n){let o=t.split("."),r=e;for(let e=0;e<o.length-1;e++)r=r[o[e]];r[o[i]]=n}static createDocFragment(e){let t=e.cloneNode(!0,"lyte").childNodes,n=document.createDocumentFragment(),o=t.length;for(let e=0;e<o;e++)n.appendChild(t[0]);return n}static _registerComponent(e,t){let n=LyteComponent.lyteComponentsDiv;if(this._template&&"string"==typeof this._template){this._template.replace(/\\'/g,"'");let e=document.createElement("div");for(e.innerHTML=this._template;e.firstChild;)n.appendChild(e.firstChild)}else document.querySelector("template[tag-name='"+e+"']")&&n.appendChild(document.querySelector("template[tag-name='"+e+"']"));if(this._template=n.querySelector("template[tag-name='"+e+"']"),this._template){if(this._template&&!this._template.content){var o=document.createDocumentFragment();let e=this._template.cloneNode(!0,"lyte").childNodes,t=e.length;for(let n=0;n<t;n++)o.appendChild(e[0]);this._template.content=o}var r=this._template.content;if(this.splitTextNodes(r),this._dynamicNodes){if(doCompile(r,this._dynamicNodes,e),this._templateAttributes){var i=[this._templateAttributes];if(doCompile(this._template,i,e),this._templateAttributes=i[0],this._templateAttributes&&this._templateAttributes.attr){var s=this._template.attributes;try{for(let e=0;e<s.length;e++)this._templateAttributes.attr[s[e].name]||"tag-name"===s[e].name||"use-strict"===s[e].name||(this._templateAttributes.attr[s[e].name]={name:s[e].name,staticValue:s[e].value})}catch(e){console.error("Error with templateAttributes. ")}}}}else console.error("Component "+e+" is not compiled. Please compile using Lyte CLI. ")}}static splitTextNodes(e){if(e&&e.childNodes&&e.childNodes.length)for(let t=e.childNodes.length-1;t>=0;t--)this.splitTextNodes(e.childNodes[t]);if("TEMPLATE"===e.tagName&&(e.content||(e.content=this.createDocFragment(e)),this.splitTextNodes(e.content)),e.nodeType===e.TEXT_NODE){let t=e.nodeValue;if(t){let n=t.match(/{{[^}]*?(?:(?:('|")[^\1]*?\1)[^}]*?)*}}/g);if(!n)return;let o=[];for(let e=0;e<n.length;e++){let r=t.indexOf(n[e]),i=r+n[e].length;r&&o.push(document.createTextNode(t.substring(0,r))),o.push(document.createTextNode(t.substring(r,i))),t=t.substring(i)}(t.trim()||!e.nextSibling||3!==e.nextSibling.nodeType||e.nextSibling.nodeValue.trim())&&o.push(document.createTextNode(t)),e.replaceWith.apply(e,o)}}}bindNode(e,t,n,o,r,i,s,a){let l,p=o.itemValue,c=o.itemIndex,d=o.type,m=o.indexValue,u=r.dynamicValue,h=r.helperInfo,f=e.ownerElement,_=[];e._callee=this;let g=!1;if(h&&Object.keys(h).length){g=!0;e.nodeName;l=e.helperValue=h;let t=[];if("action"===h.name){let r=h.args[0];h.args[0]=r.startsWith("'")?r.replace(/'/g,""):r,d?f._contextSwitchInfo=o:n&&(f._contextSwitchInfo=n._contextSwitchInfo),r=h.args.slice(0,1)[0];let i=h.args.slice(1,h.args.length),s=!1,a=e.nodeName;return-1!=a.indexOf("-")&&(s=!0),t=[f,a,s,{name:r,args:i}],void this.processHelper({name:h.name,args:t},e)}if(t=this.processArgs(this,h.args,_),l=this.processHelper({name:h.name,args:t},e),"unescape"===h.name){e={dynamicPositions:{initialNode:e,dynamicNodeValue:l},_callee:e._callee,helperValue:e.helperValue},i.push(e)}}else{h={},e.syntaxValue=u;let t=[];l=LyteComponent.get(this.component.data,u,t),_.push(t)}2===e.nodeType&&("string"!=typeof l&&(LyteComponent.isCustomElement(e.ownerElement,!0)||"boolean"==typeof l)||LyteComponent.isControlHelper(e.ownerElement))&&(e={nodeName:e.nodeName,ownerElement:f,nodeType:2,nodeValue:e.nodeValue,_callee:this,syntaxValue:e.syntaxValue,helperValue:e.helperValue,_attributeDetails:e._attributeDetails});let y;if("unbound"!==h.name){let t;n&&(t=d?n._items[c]._dynamicProperty:n._dynamicProperty);for(let r=0;r<_.length;r++){let i=_[r];for(let r=0;r<i.length;r++){let a=this.getProperty(i[r]);if(n){let s,l=i[r].search(/\W/);(s=-1!==l?i[r].substring(0,l):i[r])===p||s===m||o.node&&o.node._properties&&o.node._properties[s]?(e._contextSwitchInfo=o,a._dynamicNodes||(a._dynamicNodes=[],Object.defineProperty(a,"_dynamicNodes",{value:[],enumerable:!1,writable:!0,configurable:!0})),a._dynamicNodes.push(e),y=a):(a._helperNodes||Object.defineProperty(a,"_helperNodes",{value:new Set,writable:!0,enumerable:!1,configurable:!0}),a._helperNodes.add(n),t[i[r]]?t[i[r]].push(e):(t[i[r]]=[]).push(e))}else a._dynamicNodes||Object.defineProperty(a,"_dynamicNodes",{value:[],enumerable:!1,writable:!0,configurable:!0}),a._dynamicNodes.push(e);if(f&&"TEMPLATE"===f.tagName&&/^(for|forIn)$/.test(f.getAttribute("is"))&&!g){let t=f.getAttribute("is");("for"===t&&"items"===e.nodeName||"forIn"===t&&"object"===e.nodeName)&&(a._forHelpers||Object.defineProperty(a,"_forHelpers",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),e.ownerElement._actualBinding=a,a._forHelpers.add(e.ownerElement))}s&&LyteComponent.establishSelectedBinding(a,this.component.data,this)}i.length>1&&(e._multipleProperty={dynamicProp:y?void 0:t,actProp:this.getProperty(i[0]),helperNode:n})}}if(l=l,2===e.nodeType){let n=e._parentNode?e._parentNode:e.ownerElement;if(n.tagName){n.getAttribute("is")}let o=LyteComponent.isCustomElement(n,!0);o&&(n.set?n.set(LyteComponent.String.toCamelCase(e.nodeName),l):(n._initProperties=n._initProperties||{},n._initProperties[LyteComponent.String.toCamelCase(e.nodeName)]=l));let r=l;o&&"string"!=typeof l&&!a?(n._attributes=n._attributes||{},n._attributes[e.nodeName]=l,"TEMPLATE"===n.nodeName&&g&&l&&("for"===n.getAttribute("is")&&"items"===e.nodeName||"forIn"===n.getAttribute("is")&&"object"===e.nodeName)&&(l._bindings||Object.defineProperty(l,"_bindings",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),e.ownerElement._actualBinding={_forHelpers:(new Set).add(n),_createdBinding:!0},l._bindings.add(e.ownerElement._actualBinding)),t.push(e.nodeName)):"boolean"==typeof l?(n._attributes=e.ownerElement._attributes||{},n._attributes[e.nodeName]=l,l?n.setAttribute(e.nodeName,""):t.push(e.nodeName)):(l="object"==typeof l?"undefined"!=typeof Record&&l instanceof Record?JSON.stringify(l.$.toJSON()):JSON.stringify(l):void 0===l?"":l,LyteComponent.isControlHelper(e.ownerElement)?(n._attributes=e.ownerElement._attributes||{},n._attributes[e.nodeName]=l,t.push(e.nodeName)):e.nodeValue=l),"LYTE-YIELD"===n.tagName&&(n.component.data[LyteComponent.String.toCamelCase(e.nodeName)]=r),/^(INPUT|TEXTAREA|SELECT)$/.test(n.nodeName)&&("value"===e.nodeName?n.value=l:"checked"===e.nodeName&&(n.checked=l))}else e.nodeValue=void 0===l?"":l;return e}debounce(e,t){var n;return function(){var o=this,r=arguments;n&&clearTimeout(n),n=setTimeout(function(){e.apply(o,r),n=null},t||100)}}getProperty(e){let t=e.split("."),n=this;n._properties[t[0]]||(n._properties[t[0]]={}),n=n._properties[t[0]],Object.defineProperty(n,"_path",{enumerable:!1,value:t[0]});for(let e=1;e<t.length;e++)n[t[e]]||(n[t[e]]={},Object.defineProperty(n[t[e]],"_path",{enumerable:!1,value:n._path+"."+t[e]})),n=n[t[e]];return n}updateNode(e,t){let n,o=!1;if(e._multipleProperty&&t!==e._multipleProperty.actProp._path){o=!1;let t;if((n=e._multipleProperty).dynamicProp){if(o=n,t=n.dynamicProp[n.actProp._path]){let n=t.indexOf(e);t.splice(n,1)}let r=n.helperNode;if(0===t.length)if("if"===r.getAttribute("is"))n.actProp._helperNodes.delete(r),delete n.dynamicProp[n.actProp._path];else if(delete n.dynamicProp[n.actProp._path],r._items){let e=!0;for(let t=0;t<r._items.length;t++)if(r._items[t]._dynamicProperty&&r._items[t]._dynamicProperty[n.actProp._path]){e=!1;break}e&&n.actProp._helperNodes.delete(r)}}if(!o&&(o="dynamicNodes",t=n.actProp._dynamicNodes)){let o=t.indexOf(e);t.splice(o,1),t.length||delete n.actProp._dynamicNodes}}if(!e.syntaxValue&&!e.helperValue)return;let r,i;if(e._contextSwitchInfo||2===e.nodeType&&e.ownerElement._contextSwitchInfo){r=e._contextSwitchInfo||e.ownerElement._contextSwitchInfo;var s=[];LyteComponent.changeContext(r.node,s,r)}else if("LYTE-YIELD"===e.tagName&&e._callee._contextSwitchInfo){i=!0,r=e._callee._contextSwitchInfo;s=[];LyteComponent.changeContext(r.node,s,r,!0)}let a;if(e.helperValue){let t=a=e.helperValue;if(a=this.processHelper({name:t.name,args:this.processArgs(this,t.args)},e),"unescape"===t.name){let t=e.dynamicPositions,n=t.startingNode,o=t.length;for(;o>1;){let e=n.nextSibling;n.remove(),n=e,o--}let r=a.childNodes.length;r||(a.appendChild(document.createTextNode("")),r=1);let i=a.childNodes[0];n.replaceWith.apply(n,a.childNodes);let s={startingNode:i,length:r};e.dynamicPositions=s}}else{let t,r=e.syntaxValue;-1===r.indexOf(".")&&-1===r.indexOf("[")||(t=r,r=r.substring(0,r.indexOf(".")));let i=[],s=t?LyteComponent.get(this.component.data,t,i):this.component.data[r];if(o){let t=this.getProperty(i[0]),r=this.getProperty(i[0].substring(0,i[0].indexOf("."))),s=this.getData(i[0].substring(0,i[0].indexOf(".")));if("dynamicNodes"===o)t._dynamicNodes||Object.defineProperty(t,"_dynamicNodes",{value:[],enumerable:!1,writable:!0,configurable:!0}),t._dynamicNodes.push(e);else{t._helperNodes||Object.defineProperty(t,"_helperNodes",{value:new Set,writable:!0,enumerable:!1,configurable:!0}),t._helperNodes.add(n.helperNode);let o=n.dynamicProp;o[t._path]?o[t._path].push(e):(o[t._path]=[]).push(e)}LyteComponent.establishBindings(r,s),e._multipleProperty.actProp=t}a=s}if(2===e.nodeType){let t=[],n=e._parentNode?e._parentNode:e.ownerElement;if("TEMPLATE"===n.tagName&&"component"===n.getAttribute("is")&&"component-name"!==e.nodeName){if(n.hasAttribute("lyte-keep-alive"))for(var l in n._renderedComponent)t.push(n._renderedComponent[l]);else t.push(n._renderedComponent[n.getAttribute("component-name")])}else t.push(n);for(let n=0;n<t.length;n++){let o=t[n];if(o.set?o.set(LyteComponent.String.toCamelCase(e.nodeName),a):(o._initProperties=o._initProperties||{},o._initProperties[LyteComponent.String.toCamelCase(e.nodeName)]=a),"LYTE-YIELD"===o.tagName&&o.component.data&&e.nodeName&&o.component.data[e.nodeName]!==a&&LyteComponent.set(o.component.data,LyteComponent.String.toCamelCase(e.nodeName),a,void 0,o),o._attributes=o._attributes||{},LyteComponent.isCustomElement(o,!0)&&"string"!=typeof a&&void 0!==a){if("TEMPLATE"===e.ownerElement.nodeName&&e.helperValue&&("for"===e.ownerElement.getAttribute("is")&&"items"===e.nodeName||"forIn"===e.ownerElement.getAttribute("is")&&"object"===e.nodeName)){let t=e.ownerElement._attributes[e.nodeName],n=a;LyteComponent.removeSelectedBindingDeep(e.ownerElement._actualBinding,t),n&&(n._bindings||Object.defineProperty(n,"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),n._bindings.add(e.ownerElement._actualBinding),LyteComponent.establishBindings(e.ownerElement._actualBinding,n)),"object"===e.nodeName&&LyteComponent.removeSelectedBindingDeep(e.ownerElement._propBindingObject,t)}o.removeAttribute(e.nodeName)}else"boolean"==typeof a?(o._attributes=o._attributes||{},o._attributes[e.nodeName]=a,a?o.setAttribute(e.nodeName,""):o.removeAttribute(e.nodeName)):e.nodeValue=a="object"==typeof a?"undefined"!=typeof Record&&a instanceof Record?JSON.stringify(a.$.toJSON()):JSON.stringify(a):a;o._attributes[e.nodeName]=a,/^(INPUT|TEXTAREA|SELECT)$/.test(o.nodeName)&&("value"===e.nodeName?o.value=a:"checked"===e.nodeName&&(o.checked=a));let r,i=o._isStopped;switch(o.getAttribute("is")){case"for":this.updateForHelper(o,{type:"update"});break;case"if":r=this.updateSwitchHelper("if",o,void 0,!0);break;case"forIn":this.updateForInHelper(o,{type:"update"});break;case"switch":this.updateSwitchHelper("switch",o,void 0,!0);break;case"component":this.updateDynamicComponent(o,"update")}let s;i&&i!==r?s=r?"break"===r?"MS":"SM":"break"===i?"SM":"SS":"break"===r?s="MS":"continue"===r&&(s="SS"),s&&this.handleBreak(o._contextSwitchInfo,s)}}else e.nodeValue=void 0===a?"":a;r&&LyteComponent.removeContext(r.node,s,r,i)}handleBreak(e,t){if(e){let n=e.node,o=e.itemIndex,r=(n.getAttribute("item"),e.node._forContent),i="M"===t[0]?r.length:o+1;for(let e=o;e<i;e++){let t=r[e];for(let e=0;e<t.length;e++)t[e].remove(),(t[e]._forContent||t[e]._caseContent)&&this.removeHelpers(t[e]);r[e]=[],LyteComponent.removeSelectedBindingDeep(n._items[e].itemProperty,n._attributes.items[e]),n._helpers[e]=[],n._items[e]={_dynamicProperty:{},itemProperty:{},indexProperty:{}}}let s=n._attributes.items.length;"M"===t[1]?this.updateForHelper(n,{firstIndex:o,secondIndex:s-o,type:"replace"},void 0,{}):this.updateForHelper(n,{firstIndex:o,secondIndex:1,type:"replace"},void 0,{})}}createCustomEvent(e,t,n){const o=new CustomEvent(e);t._actions[e]=o,t._actions[e].processAction=n}isEmptyString(e){return!("string"==typeof e)||""===e}processArgs(e,t,n,o,r){n=n||[],t=Array.isArray(t)?Array.from(t):t;for(let i=0;i<t.length;i++)if(this.isEmptyString(t[i]))t[i]&&t[i].type&&this.internalHelpers(e,t,i,n,o,r);else if(t[i].startsWith("'")&&t[i].endsWith("'"))t[i]=t[i].substr(1,t[i].length-2);else{t[i]=t[i].trim();let s=[];o?"event"===t[i]?t[i]=o:"this"===t[i]?t[i]=r:t[i]=LyteComponent.get(e.component.data,t[i],s):t[i]=LyteComponent.get(e.component.data,t[i],s),n.push(s)}return t}internalHelpers(e,t,n,o,r,i){let s=t[n].value,a=this.processHelper({name:s.name,args:this.processArgs(e,s.args,o,r,i)});t[n]=a}processHelper(e,t){let n=[];if("method"===e.name&&n.push(this,t),"lbind"===e.name&&n.push(t.ownerElement),Lyte.Component.registeredHelpers[e.name])return Lyte.Component.registeredHelpers[e.name].apply(this,n.concat(e.args));console.error("helper ",e.name," is not defined")}getActionProperty(e){let t=this._properties;return t?t[e].value:void 0}hasInternalBindings(e){return e.match(/[(]{1}[^)]+[)]{1}/)}getArgValues(e,t){let n=[];for(let o=0;o<e.length;o++)n.push(t[e[o]].value);return n}createEventListeners(e,t,n){let o=this;if(e._callee=this,!/^(focus|focusin|focusout|resize|scroll|click|dblclick|mousedown|mouseup|mousemove|mouseover|mouseout|mouseenter|mouseleave|change|select|submit|keydown|keypress|keyup|contextmenu)$/.test(t)){let i=t.substr(2);e.getAttribute(i);var r=function(r){var i;window.event||(window.event=r,i=!0),LyteComponent.throwAction.call(o,o,t.substr(2),n,void 0,void 0,e,r),i&&(window.event=void 0)};Lyte.Component.registeredComponents[e.localName]&&!e.component||"TEMPLATE"===e.tagName&&"component"===e.getAttribute("is")?(e._toRegEvnts=e._toRegEvnts||{},e._toRegEvnts[t.substr(2)]={listener:r,attrVal:this.tagName.toLowerCase()+" => "+n.name}):(e.setAttribute(i,this.tagName.toLowerCase()+" => "+n.name),e.addEventListener(t.substr(2),r)),e.hasAttribute(t)&&(e[t]=void 0),e.removeAttribute(t)}}registerYields(){this._yields={};let e=this.querySelectorAll("template[is=registerYield],template[is=yield]");for(let t=0;t<e.length;t++)this._yields[e[t].getAttribute("yield-name")]=e[t]}connectedCallback(){if(this.hasAttribute("lyte-rendered")||!Lyte.Component.registeredComponents[this.localName])return;let e=this.constructor._templateAttributes;if(e&&e.attr)for(let t in e.attr){let n=e.attr[t];if(!this.hasAttribute(n.name)&&!this.component.data.hasOwnProperty(n.name)||n.globalEvent)if(n.globalEvent){this._evBoundEvents=this._evBoundEvents||{};let e,t=n.helperInfo.args[0];t.startsWith('"')||t.startsWith("'")?e=t.substring(1,t.length-1):(console.warn("Deprecation warning. Action name should be in quotes"),e=t),this._evBoundEvents[n.name]={name:e,args:n.helperInfo.args,from:"component"};let o=this.getAttribute(n.name),r=this.constructor._template.getAttribute(n.name);this.setAttribute(n.name,r+(o?" ; "+o:""))}else n.from="component",n.staticValue?this.setAttribute(e.attr[t].name,n.staticValue):(this.setAttribute(e.attr[t].name,""),this.bindNode(this.getAttributeNode(e.attr[t].name),[],void 0,{},e.attr[t],void 0,void 0,!0))}for(let e in this._toRegEvnts)this.addEventListener(e,this._toRegEvnts[e].listener),this.hasAttribute(e)?this.setAttribute(e,this.getAttribute(e)+" ; "+this._toRegEvnts[e].attrVal):this.setAttribute(e,this._toRegEvnts[e].attrVal);this._toRegEvnts={};let t=this.afterConnected();LyteComponent.establishObserverBindings.call(this,this.constructor._observers),Object.defineProperty(this.component,"_bindings",{enumerable:!1,writable:!0,configurable:!0,value:new Set}),this.component._bindings.add(this._properties),LyteComponent.establishBindings(this._properties,this.component.data),this.appendChild(t),"CRM-STAGEBOARD"!=this.tagName&&"TEST-COMPONENT5"!==this.tagName||console.timeEnd(this.tagName),this.setAttribute("lyte-rendered","");const n=new CustomEvent("onReady");this.dispatchEvent(n),this.callback("didConnect"),this.onCallBack("didConnect")}onCallBack(e){let t=this.constructor._callBacks[e];if(t)for(let e=0;e<t.length;e++)t[e].value.call(this.component)}callback(e){var t=this.component[e];t&&t.apply(this.component)}establishObserverBindings(){let e=this.constructor._observers;for(let t=0;t<e.length;t++){let n=e[t].properties;for(let o=0;o<n.length;o++){let r,i=!1;-1!==n[o].indexOf(".[]")?(i=!0,r=this.getProperty(n[o].substring(0,n[o].indexOf(".[]")))):r=this.getProperty(n[o]),r._observers||Object.defineProperty(r,"_observers",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),r._observers.add({callee:this,observer:e[t],isArrayObserver:i})}}}removeBindings(e,t){for(let n in e){let o=t[n];o&&o._bindings&&o._bindings.delete(e[n]),"object"==typeof e[n]&&o&&this.removeBindings(e[n],o)}}disconnectedCallback(){if(!LyteComponent.ignoreDisconnect){this.component._bindings=null,LyteComponent.removeSelectedBindingDeep(this._properties,this.component.data);for(let e in this._properties)this._properties[e]={};this.callback("didDestroy"),this.onCallBack("didDestroy");var e=this;setTimeout(function(){e.component.$node=null,e.component.__data=null,e.component.data.__component__=null,e.component.data=null,e.component=null,e=null},0),this.constructor.activeInstances--}}}Function.prototype.on=function(){return{type:"callBack",value:"observer"===this.type?this.value:this,properties:arguments,observes:"observer"===this.type?this:void 0}},Function.prototype.observes=function(){return{type:"observer",value:this,properties:arguments,on:Function.prototype.on}},Function.prototype.computed=function(){return{type:"computed",value:this,properties:arguments}};let LyteComponent={_registeredComponents:{},toBeRegistered:[],throwEvent:function(e){let t=this.$node?this.$node:this;const n=t._actions?t._actions[e]:void 0;let o=[];if(arguments.length>1)for(let e=1;e<arguments.length;e++)o.push(arguments[e]);LyteComponent.throwAction.call(t,t._callee,e,void 0,!0,o,t),this.$node&&t.dispatchEvent(n||new CustomEvent(e,{detail:o}))},throwAction:function(e,t,n,o,r,i,s,a){let l;if(this._route&&o)l=(e=this._route).actions||(e.actions={});else if(this.routeName){let t=this.parent;t&&(l=t.component?(e=t.component).constructor._actions:(e=t).actions||(e.actions={}))}else e&&(l=e.constructor._actions);if(!e)return void(a||console.warn("Nothing handled the action "+t+"."));n=n||(this._actions&&this._actions[t]?this._actions[t].processAction:void 0);let p=r||[];if(n){var c=[];if(i&&LyteComponent.newAddContext(i,c),p.splice.apply(p,[0,0].concat(this.processArgs(e,n.args,void 0,s,i))),i&&LyteComponent.newRemoveContext(i,c),l[n.name])if(o)l[n.name].apply(this._callee.component,p),a=!0;else{let o=i.parentNode;if(a=!0,!1!==l[n.name].apply(this.component,p))if(n.from&&i.getAttribute(s.type)&&i._boundEvents&&i._boundEvents[s.type]){i._callee.constructor._actions;let e=i._boundEvents[s.type],t=Lyte.deepCopyObject(e);t.args.shift(),LyteComponent.throwAction.call(i._callee,i._callee,s.type,t,void 0,void 0,i,s,a)}else if(LyteComponent.isCustomElement(i)&&(e=o),o){for(;o&&!o.getAttribute(t)&&"BODY"!=o.tagName;)o=o.parentNode;if(!o||"BODY"===o.tagName)return;if(o._callee||(o._callee=o.getCallee?o.getCallee(o):this.getCallee(o)),o&&s.type===t&&!s.cancelBubble)if(o._evBoundEvents&&o._evBoundEvents[t]){let e=o._evBoundEvents[t],n=Lyte.deepCopyObject(e);n.args.shift(),LyteComponent.throwAction.call(o._callee,o._callee,t,n,void 0,void 0,o,s,a)}else if(o&&o._boundEvents&&o._boundEvents[t]){let e=o._boundEvents[t],n=Lyte.deepCopyObject(e);n.args.shift(),LyteComponent.throwAction.call(o._callee,o._callee,t,n,void 0,void 0,o,s,a)}}}else console.error("Action named "+n.name+" doesn't exist")}else if(o){var d=l[t]||l[LyteComponent.String.toCamelCase(t)]||l[LyteComponent.String.dasherize(t)];if(d){var m=LyteComponent.isCustomElement(e)?e.component:e;a=!0,!1!==d.apply(m,p)&&LyteComponent.throwAction.call(e,e._callee,t,n,o,r,void 0,void 0,a)}else LyteComponent.throwAction.call(e,e._callee,t,n,o,r,void 0,void 0,a)}},processHelperArgs:function(){},isControlHelper:function(e){return"TEMPLATE"===e.tagName&&e.getAttribute("is")&&"component"!==e.getAttribute("is")},isCustomElement:function(e,t){return"TEMPLATE"===e.tagName&&t||e.nodeName&&-1!==e.nodeName.indexOf("-")&&(Lyte.Component.registeredComponents[e.localName]||"LYTE-YIELD"===e.tagName)},componentSet:function(e,t,n){(n||this.get(e)!==t)&&LyteComponent.set(this.data,e,t,void 0,this.$node)},componentGet:function(e){return e?LyteComponent.get(this.data,e):this.data},nodeGet:function(e){return e?this.component.get(e):this.component.data},nodeSet:function(e,t){this.component.set(e,t)},registerComponent:function(e,t,n){function o(){}if(Lyte.Component.registeredComponents[e])return void console.warn("Component "+e+" already registered");let r;LyteComponent._registeredComponents[e]?r=LyteComponent._registeredComponents[e]:((r=class extends customElementPrototype{})._properties={},r.activeInstances=0,r.prototype.get=this.nodeGet,r.prototype.set=this.nodeSet,r.prototype.throwAction=this.throwAction);let i=[];(n=n||{}).mixins&&n.mixins.forEach(function(e){i.push(Lyte.registeredMixins[e])}),r.component=o,o.prototype.set=this.componentSet,o.prototype.get=this.componentGet,o.prototype.throwEvent=this.throwEvent,o.prototype.executeMethod=LyteComponent.executeMethod,o.prototype.getData=LyteComponent.componentGetData,o.prototype.setData=LyteComponent.componentSetData,o.prototype.getMethods=LyteComponent.componentGetMethods,o.prototype.setMethods=LyteComponent.componentSetMethods,r._mixins=n.mixins;let s=i.length;for(let e=0;e<s;e++)for(let t in i[e])o.prototype[t]=i[e][t];r._actions=t.actions?t.actions:{},r._template=t._template,delete t._template,r._dynamicNodes=t._dynamicNodes,delete t._dynamicNodes,r._templateAttributes=t._templateAttributes,delete t._templateAttributes,r._callBacks={},r._observers=[];let a=t.data?t.data:void 0,l=t.methods?t.methods:{};r._observedAttributes=t._observedAttributes||[],r._observedMethodAttributes=t._observedMethodAttributes||{},delete t._observedAttributes,delete t._observedMethodAttributes,delete t.data,delete t.methods;for(let e in t)if("observer"===t[e].type)r._observers.push(t[e]);else if("callBack"===t[e].type){let n=t[e].properties;for(var p=0;p<n.length;p++)r._callBacks[n[p]]||(r._callBacks[n[p]]=[]),r._callBacks[n[p]].push(t[e]);t[e].observes&&r._observers.push(t[e].observes)}else o.prototype[e]=t[e];r._data=a,r._methods=l,r._registerComponent(e,r),Lyte.Component.registeredComponents[e]=!0,LyteComponent._registeredComponents[e]||("complete"===document.readyState||"interactive"===document.readyState?customElements.define(e,r):LyteComponent.toBeRegistered.push({name:e,def:r})),LyteComponent._registeredComponents[e]=r},registerHelper:function(e,t){Lyte.Component.registeredHelpers[e]=t},registerMixin:function(e,t){Lyte.Mixin.register.call(Lyte,e,t)},update:function(e,t,n,o,r,i,s){let a=e.__component__;if(!r)if(r=e[t],e.hasOwnProperty(t)||e instanceof Array||LyteComponent.objectFunctions(e,"add",t,n,!0),a&&"LYTE-YIELD"!==a.tagName){let o=Lyte.validate(e,t,n,a.component);if(o)return void LyteComponent.set(a.component.data.errors,t,o);a.component.data.errors[t]&&Lyte.objectUtils(a.component.data.errors,"delete",t),e[t]=n}else e[t]=n;let l=!!a;if(a&&s&&"string"==typeof n&&a.getAttribute(LyteComponent.String.dasherize(t))!==n){let e,o=LyteComponent.String.dasherize(t);o.startsWith("lt-prop")&&(e=a.ltProp())&&e.hasOwnProperty(LyteComponent.String.toCamelCase(o.substring(8)))||a.setAttribute(LyteComponent.String.dasherize(t),n)}if(n&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n){if(r&&"object"==typeof r&&r._bindings){if(n._bindings||Object.defineProperty(n,"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),a&&a.component.data===e&&-1===t.indexOf(".")){let o=a.getProperty(t);if(this.removeSelectedBindingDeep(o,r),n._bindings.add(o),this.establishBindings(o,n),o._forHelpers){let e=o._forHelpers.toArray();for(var p=0;p<e.length;p++){let t=e[p];t._propBindingObject&&this.removeSelectedBindingDeep(t._propBindingObject,r)}}this.affectChanges(o,void 0,r,i,e[t])}else if(e._bindings){let o=e._bindings.toArray();for(let s=0;s<o.length;s++){let a=o[s][t];if(a){if(this.removeSelectedBindingDeep(a,r),n._bindings.add(a),this.establishBindings(a,n),a._forHelpers){let e=a._forHelpers.toArray();for(let t=0;t<e.length;t++){let n=e[t];n._propBindingObject&&this.removeSelectedBindingDeep(n._propBindingObject,r)}}this.affectChanges(a,void 0,r,i,e[t])}}}}else if(n._bindings||Object.defineProperty(n,"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),e._bindings){let o=e._bindings.toArray();for(let s=0;s<o.length;s++){let a=o[s];a[t]&&(n._bindings.add(a[t]),this.establishBindings(a[t],n),this.affectChanges(a[t],void 0,r,i,e[t]))}}}else{if(r&&"object"==typeof r&&r._bindings){let n=e._bindings.toArray();for(let e=0;e<n.length;e++){let o=n[e];if(o[t]&&(this.removeSelectedBindingDeep(o[t],r),o[t]._forHelpers)){let e=o[t]._forHelpers.toArray();for(let t=0;t<e.length;t++){let n=e[t];n._propBindingObject&&this.removeSelectedBindingDeep(n._propBindingObject,r)}}}}if(e._bindings){let n=e._bindings.toArray();for(let o=0;o<n.length;o++){let s=n[o];s[t]&&this.affectChanges(s[t],void 0,r,i,e[t])}}}if(l&&a._attributeDetails){let e,o=a._attributeDetails[LyteComponent.String.dasherize(t)];if(o&&o.isLbind&&(e=o.dynamicValue),e){let t;a._contextSwitchInfo&&(t=[],LyteComponent.changeContext(a._contextSwitchInfo.node,t,a._contextSwitchInfo));let o=LyteComponent.getNew(a._callee.component.data,e),r=!1;o.context===a._callee.component.data?a._callee._properties[o.lastKey]&&a._callee._properties[o.lastKey].__fromComponent&&(r=!0):r=!0,r&&LyteComponent.set(o.context,o.lastKey,n,void 0,a._callee),t&&LyteComponent.removeContext(a._contextSwitchInfo.node,t,a._contextSwitchInfo)}}},set:function(e,t,n,o){if("string"==typeof t&&e[t]===n)return;let r=-1,i=t;if(t instanceof Object||(r=t.lastIndexOf(".")),-1!==r){let n=t.substring(0,r);t=t.substring(r+1),e=LyteComponent.get(e,n)}let s=[];if(e._setterScope)var a=e._setterScope;if(i=i===t?i:void 0,t instanceof Object)if(Lyte.isRecord(e)&&!o){for(let n in t)Array.isArray(e[n])?s.push({key:n,oldValue:e[n].slice(0)}):s.push({key:n,oldValue:e[n]});let n=store.$.setData(e.$,t);if(n.$.isError)return n;for(let t=0;t<s.length;t++)LyteComponent.update(e,s[t].key,e[s[t].key],o,void 0===s[t].oldValue?null:s[t].oldValue,a,i)}else for(let n in t)LyteComponent.update(e,n,t[n],o,void 0,a,i);else if(Lyte.isRecord(e)&&!o){let r=e[t],s=store.$.setData(e.$,t,n);if(s.$.isError)return s;LyteComponent.update(e,t,n,o,void 0===r?null:r,a,i)}else LyteComponent.update(e,t,n,o,void 0,a,i)},newAddContext:function(e,t){let n="LYTE-YIELD"===e.tagName;e._contextSwitchInfo?LyteComponent.changeContext(e._contextSwitchInfo.node,t,e._contextSwitchInfo,n):n&&e._callee._contextSwitchInfo&&LyteComponent.changeContext(e._callee._contextSwitchInfo.node,t,e._callee._contextSwitchInfo,!0)},newRemoveContext:function(e,t){let n="LYTE-YIELD"===e.tagName;e._contextSwitchInfo?LyteComponent.removeContext(e._contextSwitchInfo.node,t,e._contextSwitchInfo,n):n&&e._callee._contextSwitchInfo&&LyteComponent.removeContext(e._callee._contextSwitchInfo.node,t,e._callee._contextSwitchInfo,!0)},changeContext:function(e,t,n,o){if(!n)return;e._contextSwitchInfo?LyteComponent.changeContext(e._contextSwitchInfo.node,t,e._contextSwitchInfo,"LYTE-YIELD"===e.tagName||o):("LYTE-YIELD"===e.tagName||o)&&e._callee&&e._callee._contextSwitchInfo&&LyteComponent.changeContext(e._callee._contextSwitchInfo.node,t,e._callee._contextSwitchInfo);let r,i;if(n.type){if("for"===n.type){if(r=e.getAttribute("index"),i=e.getAttribute("item"),0===e._items.length)return}else if(r=e.getAttribute("key"),i=e.getAttribute("value"),0===Object.keys(e._items).length)return;let o=e._callee,s=o.component.data[i],a=o.component.data[r],l=o._properties[i],p=o._properties[r],c="for"===n.type?e._attributes.items:e._attributes.object;o.component.data[i]=c[n.itemIndex],o.component.data[r]=n.itemIndex,o._properties[i]=e._items[n.itemIndex].itemProperty,o._properties[r]={};let d={initialItemValue:s,initialIndexValue:a,initialItemProp:l,initialIndexProp:p};t.push(d)}else{let o={},r=e._callee._callee;Object.keys(n.node._properties).forEach(function(e){o[e]={},o[e].value=r.component.data[e],o[e].property=r._properties[e],r._properties[e]=n.node._properties[e],r.component.data[e]=n.node.component.data[e]}),t.push(o)}},removeContext:function(e,t,n,o){if(!n)return;e._contextSwitchInfo?LyteComponent.removeContext(e._contextSwitchInfo.node,t,e._contextSwitchInfo,"LYTE-YIELD"===e.tagName||o):("LYTE-YIELD"===e.tagName||o)&&e._callee&&e._callee._contextSwitchInfo&&LyteComponent.removeContext(e._callee._contextSwitchInfo.node,t,e._callee._contextSwitchInfo);let r,i;if(n.type){if("for"===n.type){if(r=e.getAttribute("index"),i=e.getAttribute("item"),0===e._items.length)return}else if(r=e.getAttribute("key"),i=e.getAttribute("value"),0===Object.keys(e._items).length)return;let o=e._callee,s=(e._attributes.items,t.shift());o.component.data[i]=s.initialItemValue,o.component.data[r]=s.initialIndexValue,o._properties[i]=s.initialItemProp,o._properties[r]=s.initialIndexProp}else{let o=e._callee._callee,r=t.shift();Object.keys(n.node._properties).forEach(function(e){o.component.data[e]=r[e].value,o._properties[e]=r[e].property})}},objectFunctions:function(){let e=arguments[0],t=arguments[1],n=arguments[2],o=arguments[3],r=arguments[4];if("add"===t&&!r)return void LyteComponent.set(e,n,o);let i={};if(i.type=t,i.property=n,!/^(add|delete)$/.test(t))return void console.error("No such function exists in objectFunctions");let s=e._bindings;if("delete"===t&&LyteComponent.set(e,n,void 0),s){let e=s.toArray();for(let n=0;n<e.length;n++){let o=e[n]._forHelpers;if(o){let e=o.toArray();for(let n=0;n<e.length;n++){let o=e[n],r=(o.getAttribute("key"),[]);"add"===t&&LyteComponent.newAddContext(o,r),o._callee.updateForInHelper(o,i),"add"===t&&LyteComponent.newRemoveContext(o,r)}}}}"delete"===t&&delete e[n]},arrayFunctions:function(){let e=arguments[0],t=arguments[1];if(!/^(replaceAt|removeAt|shift)$/.test(t)||e.length)switch(t){case"replaceAt":{let t=parseInt(arguments[2]);if(t>e.length)return console.warn("index provided for replaceAt is greater than array length"),[];let o=arguments[3];o instanceof Array||(o=[o]);let r=e.splice.apply(e,[t,1].concat(o)),i={firstIndex:t,secondIndex:o.length,type:"replace"};if(e._bindings){let o=e._bindings.toArray();for(let s=0;s<o.length;s++){let a=o[s];if(a._forHelpers){let e=a._forHelpers.toArray();for(let n=0;n<e.length;n++){let o=e[n],s=t+r.length,a=o.getAttribute("item");for(let e=t,n=0;e<s;e++,n++)LyteComponent.removeSelectedBindingDeep({[a]:o._items[e].itemProperty},{[a]:r[n]});let l=[];LyteComponent.newAddContext(o,l),o._callee.updateForHelper(o,i),LyteComponent.newRemoveContext(o,l)}}for(let t in a){let o=parseInt(t);if(!isNaN(o)&&o>=i.firstIndex){let s,l=o-i.firstIndex;if(s=l<=i.thirdIndex?r[l]:e[i.firstIndex-1+i.secondIndex+l],this.removeSelectedBindingDeep(a[t],s),a[t]._forHelpers){let e=a[t]._forHelpers.toArray();for(var n=0;n<e.length;n++){let t=e[n];t._propBindingObject&&this.removeSelectedBindingDeep(t._propBindingObject,s)}}e[o]&&(e[o]._bindings||Object.defineProperty(e[o],"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),this.establishBindings({dummy:a[t]},{dummy:e[o]})),this.affectChanges(a[t])}}}}return LyteComponent.callArrayObservers(e,{type:"array",insertedItems:o,index:t}),r[0]}case"splice":{let t=parseInt(arguments[2]);if(t>e.length)return console.warn("index provided for replaceAt is greater than array length"),[];let o=arguments[3],r=arguments[4];r instanceof Array||(r=[r]);let i=e.splice.apply(e,[t,o].concat(r)),s={firstIndex:t,secondIndex:r.length,thirdIndex:o,type:"splice"};if(e._bindings){let o=e._bindings.toArray();for(let r=0;r<o.length;r++){let a=o[r];if(a._forHelpers){let e=a._forHelpers.toArray();for(let n=0;n<e.length;n++){let o=e[n],r=t+i.length,a=o.getAttribute("item");for(let e=t,n=0;e<r;e++,n++)LyteComponent.removeSelectedBindingDeep({[a]:o._items[e].itemProperty},{[a]:i[n]});let l=[];LyteComponent.newAddContext(o,l),o._callee.updateForHelper(o,s),LyteComponent.newRemoveContext(o,l)}}for(let t in a){let o=parseInt(t);if(!isNaN(o)&&o>=s.firstIndex){let r,l=o-s.firstIndex;if(r=l<=s.thirdIndex?i[l]:e[s.firstIndex-s.thirdIndex+s.secondIndex+l],this.removeSelectedBindingDeep(a[t],r),a[t]._forHelpers){let e=a[t]._forHelpers.toArray();for(n=0;n<e.length;n++){let t=e[n];t._propBindingObject&&this.removeSelectedBindingDeep(t._propBindingObject,r)}}e[o]&&(e[o]._bindings||Object.defineProperty(e[o],"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),this.establishBindings({dummy:a[t]},{dummy:e[o]})),this.affectChanges(a[t])}}}}return LyteComponent.callArrayObservers(e,{type:"array",index:t,insertedItems:r,removedItems:i}),i}case"push":{let t=arguments[2];t instanceof Array||(t=[t]),LyteComponent.arrayFunctions(e,"insertAt",e.length,t)}break;case"pop":return LyteComponent.arrayFunctions(e,"remove",e.length-1)[0];case"shift":case"shiftObject":return LyteComponent.arrayFunctions(e,"remove",0)[0];case"removeAt":case"remove":{let t=parseInt(arguments[2]);if(t>e.length)return console.warn("index provided for removeAt is greater than array length"),[];let o=arguments[3]?parseInt(arguments[3]):1,r={firstIndex:t,secondIndex:o,type:"remove"},i=e.splice(t,o);if(e._bindings){let o=e._bindings.toArray();for(let s=0;s<o.length;s++){let a=o[s];if(a._forHelpers){let e=a._forHelpers.toArray();for(let n=0;n<e.length;n++){let o=e[n],s=t+i.length,a=o.getAttribute("item");for(let e=t,n=0;e<s;e++,n++)LyteComponent.removeSelectedBindingDeep({[a]:o._items[e].itemProperty},{[a]:i[n]});let l=[];LyteComponent.newAddContext(o,l),o._callee.updateForHelper(o,r),LyteComponent.newRemoveContext(o,l)}}for(let t in a){let o=parseInt(t);if(!isNaN(o)&&o>=r.firstIndex){let s,l=o-r.firstIndex;if(s=l<r.secondIndex?i[l]:e[r.firstIndex-r.secondIndex+l],this.removeSelectedBindingDeep(a[t],s),a[t]._forHelpers){let e=a[t]._forHelpers.toArray();for(n=0;n<e.length;n++){let t=e[n];t._propBindingObject&&this.removeSelectedBindingDeep(t._propBindingObject,s)}}e[o]&&(e[o]._bindings||Object.defineProperty(e[o],"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),this.establishBindings({dummy:a[t]},{dummy:e[o]})),this.affectChanges(a[t])}}}}return LyteComponent.callArrayObservers(e,{type:"array",removedItems:i,index:t}),i}case"unshift":case"unshiftObject":case"unshiftObjects":{let t=arguments[2];t instanceof Array||(t=[t]),LyteComponent.arrayFunctions(e,"insertAt",0,t)}break;case"insertAt":{let t=parseInt(arguments[2]),o=arguments[3],r=o.length;o instanceof Array||(o=[o]);for(let n=t;n>e.length;n--)o.unshift(void 0),t--;let i={firstIndex:t,secondIndex:o.length,type:"insert"};if(e.splice.apply(e,[t,0].concat(o)),e._bindings){let t=e._bindings.toArray();for(let o=0;o<t.length;o++){let r=t[o];if(r._forHelpers){let e=r._forHelpers.toArray();for(let t=0;t<e.length;t++){let n=e[t],o=[];LyteComponent.newAddContext(n,o),n._callee.updateForHelper(n,i),LyteComponent.newRemoveContext(n,o)}}for(let t in r){let o=parseInt(t);if(!isNaN(o)&&o>=i.firstIndex){if(this.removeSelectedBindingDeep(r[t],e[o+i.secondIndex]),r[t]._forHelpers){let e=r[t]._forHelpers.toArray();for(n=0;n<e.length;n++){let t=e[n];t._propBindingObject&&this.removeSelectedBindingDeep(t._propBindingObject,oldObject)}}e[o]&&(e[o]._bindings||Object.defineProperty(e[o],"_bindings",{enumerable:!1,writable:!0,value:new Set,configurable:!0}),this.establishBindings({dummy:r[t]},{dummy:e[o]})),this.affectChanges(r[t])}}}}LyteComponent.callArrayObservers(e,{type:"array",insertedItems:arguments[3]instanceof Array?arguments[0].slice(parseInt(arguments[2]),r+1):[arguments[3]],index:parseInt(arguments[2])})}break;case"concat":LyteComponent.arrayFunctions(e,"insertAt",e.length,arguments[2]);break;default:return void console.error("array Function "+t+" doesn't exist")}else console.warn(t+" operation cannot be performed on empty array")},callArrayObservers:function(e,t){if(e._bindings){let n=e._bindings.toArray();for(let o=0;o<n.length;o++){let r=n[o],i=n[o]._path;if(r._observers){let n=r._observers.toArray();for(let o=0;o<n.length;o++){let r=n[o];r.isArrayObserver&&(t&&(t.item=i),r.observer.value.call(r.callee&&r.callee.component?r.callee.component:e._setterScope?e._setterScope:window,t))}}r.length&&this.affectChanges(r.length)}}},establishUpdateBindings:function(e,t,n){let o=e.toArray();for(let e=0;e<o.length;e++){let r=o[e];r[t]&&(n._bindings||Object.defineProperty(n,"_bindings",{value:new Set,enumerable:!1,configurable:!0,writable:!0}),n._bindings.add(r[t]),this.establishBindings(r[t],n))}},establishSelectedBinding:function(e,t,n){if(!e)return;let o=e._path.split("."),r=n.getProperty(o[0]),i=t[o[0]];for(let e=0;e<o.length-1&&"object"==typeof i;e++)i._bindings||Object.defineProperty(i,"_bindings",{enumerable:!1,configurable:!0,writable:!0,value:new Set}),i._bindings.add(r),r=r[o[e+1]],i=i[o[e+1]]},establishBindings:function(e,t){if(e._helperNodes){let n=e._path,o=e._helperNodes.toArray();for(let e=0;e<o.length;e++){let r=o[e]._dynamicProperty?o[e]._dynamicProperty[n]:void 0;if(r)for(let e=0;e<r.length;e++){let n=r[e].ownerElement;if(n&&"TEMPLATE"===n.tagName&&"for"===n.getAttribute("is")&&n._items){n.getAttribute("item");for(let e=0;e<n._items.length;e++){let o=t[e],r=n.getAttribute("item");o&&"object"==typeof n._items[e]&&this.establishBindings(n._items[e].itemProperty,{[r]:o})}}}}}for(let n in e){let o=t[n];o&&"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o?(o._bindings||Object.defineProperty(o,"_bindings",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),o._bindings.add(e[n]),"object"==typeof e[n]&&this.establishBindings(e[n],o)):(t._bindings||Object.defineProperty(t,"_bindings",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),t._bindings.add(e))}},removeSelectedBindingDeep:function(e,t){if(t){t._bindings&&(t._bindings.delete(e),t._bindings.size||delete t._bindings);for(let n in e){let o=t[n];o&&o._bindings&&(o._bindings.delete(e[n]),o._bindings.size||delete t._bindings),"object"==typeof e[n]&&o&&this.removeSelectedBindingDeep(e[n],o)}if(e._forHelpers){let n=e._forHelpers.toArray();for(let e=0;e<n.length;e++){let o=n[e];if("for"===o.getAttribute("is")){o.getAttribute("item");let e=o._attributes.items,t=o._items;for(let n=0;n<t.length;n++)this.removeSelectedBindingDeep(t[n].itemProperty,e[n])}else o._propBindingObject&&t._bindings&&(t._bindings.delete(o._propBindingObject),t._bindings.size||delete t._bindings,this.removeSelectedBindingDeep(o._propBindingObject,t))}}}},removeAllBindings:function(e,t){for(let n in e)t[n]&&t[n]._bindings&&(t[n]._bindings.delete(e[n]),t[n]._bindings.size||delete t[n]._bindings),t[n]&&"string"!=typeof t[n]&&LyteComponent.removeAllBindings(e[n],t[n])},affectChanges:function(e,t,n,o,r){if(e._dynamicNodes)for(let t=0;t<e._dynamicNodes.length;t++)e._dynamicNodes[t]._callee.updateNode(e._dynamicNodes[t],e._path);let i=e._path;if(e._helperNodes){let t=[],n=e._helperNodes.toArray();for(let o=0;o<n.length;o++)if(e._helperNodes.has(n[o]))if("for"===n[o].getAttribute("is")&&n[o]._items){let e=[];LyteComponent.newAddContext(n[o],e);let r=n[o].getAttribute("index"),s=n[o].getAttribute("item"),a=n[o]._callee,l=a.component.data[s],p=a.component.data[r],c=a._properties[s],d=a._properties[r],m=n[o]._attributes.items;for(let e=0;e<n[o]._items.length;e++)if(a.component.data[s]=m[e],a.component.data[r]=e,a._properties[s]=n[o]._items[e].itemProperty,n[o]._items[e]._dynamicProperty[i]){t=n[o]._items[e]._dynamicProperty[i];for(let e=0;e<t.length;e++)t[e]._callee.updateNode(t[e],i)}a.component.data[s]=l,a.component.data[r]=p,a._properties[s]=c,a._properties[r]=d,LyteComponent.newRemoveContext(n[o],e)}else if("forIn"===n[o].getAttribute("is")&&n[o]._items){let e=[];LyteComponent.newAddContext(n[o],e);let r=n[o].getAttribute("key"),s=n[o].getAttribute("value"),a=n[o]._callee,l=a.component.data[s],p=a.component.data[r],c=a._properties[s],d=a._properties[r],m=n[o]._attributes.object;for(let e in n[o]._items)if(a.component.data[s]=m[e],a.component.data[r]=e,a._properties[s]=n[o]._items[e].itemProperty,n[o]._items[e]._dynamicProperty[i]){t=n[o]._items[e]._dynamicProperty[i];for(let e=0;e<t.length;e++)t[e]._callee.updateNode(t[e],i)}a.component.data[s]=l,a.component.data[r]=p,a._properties[s]=c,a._properties[r]=d,LyteComponent.newRemoveContext(n[o],e)}else{t=n[o]._dynamicProperty[e._path]||[];let r=[];LyteComponent.newAddContext(n[o],r);for(let n=0;n<t.length;n++)t[n]._callee.updateNode(t[n],e._path);LyteComponent.newRemoveContext(n[o],r)}}if(e._observers){let t=e._observers.toArray();for(let i=0;i<t.length;i++){let s=t[i];s.observer.value.call(s.callee&&s.callee.component?s.callee.component:o||window,{type:"change",oldValue:n,newValue:r,item:e._path})}}if(Array.isArray(e))for(var s=0;s<e.length;s++)for(let t in e[s])this.affectChanges(e[s][t],!0,n?n[s]?n[s][t]:n[s]:n,o,r?r[s]?r[s][t]:r[s]:r);else for(let t in e)this.affectChanges(e[t],!0,n?n[t]:n,o,r?r[t]:r)},getDynamicData:function(e,t){var n=this;return t.forEach(function(t,o){if(Array.isArray(t)){if(void 0===e)return;var r=n.getDynamicData.call(n,n.component.data,t);if(void 0===r)return;e=e[r]}else{if(void 0===e)return;e=e[t]}}),e},get:function(e,t,n){n||(n=[]);try{let o=t.match(/([^[\]]+|\[\])/g),r=e;n.push(o[0]);let i=o[0].split(".");for(let t=0;t<i.length;t++)e=e[i[t]];for(let t=1;t<o.length;t++){let i=o[t];if(i.startsWith(".")){let t=i.substring(1).split(".");for(let n=0;n<t.length;n++)e=e[t[n]];n[n.length-1]=n[n.length-1]+i}else if(i.startsWith("'")||i.startsWith('"')||!isNaN(i))isNaN(i)?n[n.length-1]=n[0]+"."+i.substring(1,i.length-1):n[n.length-1]=n[0]+"."+i,e=e[i.substring(1,i.length-1)];else{n.length;let t=this.get(r,i,n);n[0]=n[0]+"."+t,e=e[t]}}return e}catch(e){return}},getNew:function(e,t){try{let r=t.match(/([^[\]]+|\[\])/g),i=e,s=r[0].split(".");if(r.length<2){if(s.length<2)return{context:i,lastKey:s[0]};for(var n=0;n<s.length-1;n++)e=e[s[n]];return{context:e,lastKey:s[n]}}for(let t=0;t<s.length;t++)e=e[s[t]];for(var o=1;o<r.length-1;o++){let t=r[o];if(t.startsWith(".")){let n=t.substring(1).split(".");for(let t=0;t<n.length;t++)e=e[n[t]]}else if(t.startsWith("'")||t.startsWith('"')||!isNaN(t))e=e[t.substring(1,t.length-1)];else{e=e[this.get(i,t)]}}let a=r[o];if(a.startsWith(".")){let t=a.substring(1).split("."),n=0;for(;n<t.length-1;n++)e=e[t[n]];a=t[n]}else a=a.startsWith("'")||a.startsWith('"')||!isNaN(a)?a.substring(1,a.length-1):this.get(i,a);return{context:e,lastKey:a}}catch(e){return}},componentGetData:function(e){return e?this.get(e):this.data},componentSetData:function(e,t){if("string"==typeof e)this.set(e,t);else if(e instanceof Object)for(let t in e)this.set(t,e[t])},componentGetMethods:function(e){return e?this.methods[e]:this.methods},componentSetMethods:function(e,t){if("string"==typeof e)this.methods[e]=t;else if(e instanceof Object)for(let t in e)this.methods[t]=e[t]},render:function(e,t,n){if(e){var o=document.createElement(e);if(t&&o.setData(t),n){let e=document.querySelector(n);e?e.appendChild(o):console.warn("Specified outlet doesn't exist")}return o}console.error("Component name not specified")},String:{upperCaseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},lowerCaseFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},toCamelCase:function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})},dasherize:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},appendChild:function(e,t){LyteComponent.ignoreDisconnect=!0,e.appendChild(t),LyteComponent.ignoreDisconnect=!1},replaceWith:function(){var e=Array.from(arguments),t=e.shift();LyteComponent.ignoreDisconnect=!0,t.replaceWith.apply(t,e),LyteComponent.ignoreDisconnect=!1},insertBefore:function(e,t){LyteComponent.ignoreDisconnect=!0,e.parentNode.insertBefore(t,e||null),LyteComponent.ignoreDisconnect=!1},insertAfter:function(){var e=Array.from(arguments),t=e.shift();LyteComponent.ignoreDisconnect=!0,t.after.apply(t,e),LyteComponent.ignoreDisconnect=!1},executeMethod:function(){let e=Array.prototype.slice.call(arguments,1);var t=LyteComponent.String.toCamelCase(arguments[0]);if(this.methods[t])return this.methods[t].apply(this,e);console.error(t+" method not found")},establishObserverBindings:function(e,t,n){let o=this;t&&(o=t);for(let r=0;r<e.length;r++){let i=e[r].properties;for(let s=0;s<i.length;s++){let a,l=!1;-1!==i[s].indexOf(".[]")?(l=!0,a=LyteComponent.getProperty.call(this,i[s].substring(0,i[s].indexOf(".[]")),t,n)):a=LyteComponent.getProperty.call(this,i[s],t,n),a._observers||Object.defineProperty(a,"_observers",{value:new Set,enumerable:!1,writable:!0,configurable:!0}),a._observers.add({callee:o,observer:e[r],isArrayObserver:l})}}},getProperty:function(e,t,n){let o=e.split("."),r=this;t?(r=n,n[o[0]]||(n[o[0]]={}),r=n[o[0]]):(r._properties[o[0]]||(r._properties[o[0]]={}),r=r._properties[o[0]]),Object.defineProperty(r,"_path",{enumerable:!1,value:o[0]});for(let e=1;e<o.length;e++)r[o[e]]||(r[o[e]]={},Object.defineProperty(r[o[e]],"_path",{enumerable:!1,value:r._path+"."+o[e]})),r=r[o[e]];return r}};Lyte.Component.render=LyteComponent.render,LyteComponent.lyteComponentsDiv=document.createElement("div"),LyteComponent.lyteComponentsDiv.setAttribute("id","lyte-components-div"),Set.prototype.toArray=function(){return"Set"===this.constructor.name?Array.from(this):Array.from(this._values)},"complete"===document.readyState||"interactive"===document.readyState?onDomContentForLyte():document.addEventListener("DOMContentLoaded",function(e){onDomContentForLyte()},!0),LyteComponent.registerHelper("unbound",function(e){return e}),LyteComponent.registerHelper("action",function(e,t,n,o){n?(e._actions=e._actions?e._actions:{},e._actions[t]||(this.createCustomEvent(t,e,o),e.removeAttribute(t))):this.createEventListeners(e,t,o)}),LyteComponent.registerHelper("lbind",function(e){return this.getData(e)}),LyteComponent.registerHelper("method",function(e,t,n){arguments[0],t=arguments[1],n=arguments[2];var o=arguments[0].component,r=t?t.ownerElement:null,i=arguments[1].nodeName;t=null;var s=Array.prototype.slice.call(arguments,3),a=function(){let e=Array.from(arguments),t=s.concat(e);return o.methods[n].apply(o,t)};if(!r)return a;r.set?r.component.methods[LyteComponent.String.toCamelCase(i)]=a:r.setMethods(LyteComponent.String.toCamelCase(i),a)}),LyteComponent.registerHelper("unescape",function(e){let t=document.createElement("div");return t.innerHTML=e,t}),LyteComponent.registerHelper("debugger",function(){}),LyteComponent.registerHelper("log",function(){console.log.apply(window,Array.from(arguments))}),LyteComponent.registerHelper("ifEquals",function(e,t){return e===t}),LyteComponent.registerHelper("if",function(e,t,n){return e?t:n}),LyteComponent.registerHelper("negate",function(e){return!e}),LyteComponent.registerHelper("ifNotEquals",function(e,t){return e!==t}),LyteComponent.registerHelper("concat",function(){for(var e="",t=arguments.length,n=0;n<t;n++)void 0!=arguments[n]&&(e+=arguments[n]);return e}),Object.defineProperty(HTMLElement.prototype,"setData",{enumerable:!1,value:function(e,t){if(this._initProperties=this._initProperties||{},"string"==typeof e)this._initProperties[e]=t;else if(e instanceof Object)for(let t in e)this._initProperties[t]=e[t]}}),Object.defineProperty(HTMLElement.prototype,"setMethods",{enumerable:!1,value:function(e,t){if(this._initMethods=this._initMethods||{},"string"==typeof e)this._initMethods[e]=t;else if(e instanceof Object)for(let t in e)this._initMethods[t]=e[t]}}),LyteComponent.registerHelper("expHandlers",function(e,t,n){if("++"==t){if("postfix"==n)return e++;if("prefix"==n)return++e}else if("--"==t){if("postfix"==n)return e--;if("prefix"==n)return--e}else{if("=="==t||"==="==t)return e==n;if("!="==t||"!=="==t)return e!=n;if("&&"==t)return e&&n;if("||"==t)return e||n;if("+"==t&&n)return e+n;if("-"==t&&n)return e-n;if("*"==t)return e*n;if("/"==t)return e/n;if("%"==t)return e%n;if("<"==t)return e<n;if(">"==t)return e>n;if("<="==t)return e<=n;if(">="==t)return e>=n;if("|"==t)return e|n;if("&"==t)return e&n;if("!"==t)return!e;if("-"==t&&!n)return-e;if("="==t)return e=n;if("+="==t)return e+=n;if("-="==t)return e-=n;if("*="==t)return e*=n;if("/="==t)return e/=n}}),Lyte.Component.register("lyte-event-listener",{_template:'<template tag-name="lyte-event-listener"></template>',_dynamicNodes:[],_observedAttributes:["eventName"],init:function(){let e=this,t=Lyte.addEventListener(this.get("eventName"),function(){let t=Array.prototype.slice.call(arguments);t.splice(0,0,"on-fire"),e.throwEvent.apply(e,t)});this.regId=t},data:function(){return{eventName:Lyte.attr("string")}},didDestroy:function(){Lyte.removeEventListener(this.regId)}});